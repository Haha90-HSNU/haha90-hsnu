"use strict";var wallsCon,lineENow,lineEE,lineII,lineCircle0,lineCircle1,dragBtn,connectLines,sCanvas,fps=60,log=console.log,gameMD=1,gameMDTarget=1,EEIIMD=0,nnSlit=2,zoomRatio=1,zoomRatioTarget=1,nnMax=100,arrL=10,arrR=.6,arrowsSlit=[],arrowsScreen=[],arrowsCircle=[],walls=[],gap=5,nnLine=1e3,maxE0=30,slitD0=20,slitDD=135,slitBB=30,lambda=1,screenX=25,screenXDir=.2,screenR=500,tt=0;function init(){ground.visible=!1,skyBox.visible=!1;for(var e=0;e<nnMax;e++){let i=new THREE.Color("hsl("+e/nnMax*300+", 100%, 50%)");var t=new TEACHER.ObjArrow2(arrR,arrL,i);t.position.x=1*(e-nnMax/2),scene.add(t),arrowsSlit.push(t);var n=new TEACHER.ObjArrow2(arrR,arrL,i);n.position.x=1*(e-nnMax/2),n.position.z=10,scene.add(n),arrowsScreen.push(n);var o=new TEACHER.ObjArrow2(arrR,arrL,i);o.position.x=1*(e-nnMax/2),o.position.z=20,scene.add(o),arrowsCircle.push(o)}wallsCon=new THREE.Object3D,scene.add(wallsCon);for(e=0;e<21;e++){var i=new TEACHER.ObjBox(100,20,2,6710886);wallsCon.add(i),walls.push(i)}lineEE=new TEACHER.Line(16777215,2,nnLine),lineII=new TEACHER.Line(16777011,5,nnLine),scene.add(lineEE).add(lineII);for(e=0;e<nnLine;e++)lineEE.addPoint(100*(e-nnLine/2)/nnLine,0,100),lineII.addPoint(100*(e-nnLine/2)/nnLine,0,200);lineEE.update(),lineII.update(),lineENow=new TEACHER.Line(16777215,6,2),lineCircle0=new TEACHER.Line(16777215,6,2),lineCircle1=new TEACHER.Line(3407769,4,3),lineENow.addPoint(10,10,30),lineENow.addPoint(20,10,30),lineCircle0.addPoint(10,10,10),lineCircle0.addPoint(20,10,10),lineCircle1.addPoint(10,10,20),lineCircle1.addPoint(20,10,20),lineCircle1.addPoint(20,20,20),scene.add(lineCircle0).add(lineCircle1).add(lineENow);var a=new THREE.Geometry,s=new THREE.LineBasicMaterial({color:"#FFFFFF"});connectLines=new THREE.LineSegments(a,s),scene.add(connectLines),(dragBtn=new TEACHER.ObjPicPlane(7.4,10,"allData/pics/picDrag.png","y")).position.z=screenR+5,dragBtn.position.x=screenX,scene.add(dragBtn),(sCanvas=document.createElement("canvas")).width=512,sCanvas.height=32,sCanvas.ctx=sCanvas.getContext("2d"),sCanvas.geometry=new THREE.PlaneGeometry(100,6.25),sCanvas.material=new THREE.MeshBasicMaterial,sCanvas.material.map=new THREE.Texture(sCanvas),sCanvas.material.map.needsUpdate=!0,sCanvas.mesh=new THREE.Mesh(sCanvas.geometry,sCanvas.material),sCanvas.mesh.position.z=screenR-5,sCanvas.mesh.position.y=-2,sCanvas.mesh.rotation.x=-Math.PI/2,scene.add(sCanvas.mesh),sCanvas.imageData=sCanvas.ctx.getImageData(0,0,sCanvas.width,sCanvas.height),world2D.mBtnPhasor.on("click",clickMBtn),world2D.mBtnNSlit.on("click",clickMBtn),world2D.mBtnSSlitD.on("click",clickMBtn),world2D.mBtnDSlitD.on("click",clickMBtn),world2D.btnZoom.on("click",function(){zoomRatioTarget=0===zoomRatioTarget?1:0}),world2D.btnEEII.on("click",function(){EEIIMD=0===EEIIMD?1:0}),world2D.controlNSlit.btnPlus.on("click",clickPN),world2D.controlNSlit.btnMinus.on("click",clickPN),world2D.chAuto.label.visible=!1,world2D.controlPhasor.chEERR.label.visible=!1,world2D.controlPhasor.chEEZZ.label.visible=!1,world2D.chSum.label.visible=!1,world2D.chSum.checked=!0,setInterval(tick,1e3/fps)}function tick(){if((tt+=.1)<9&&tt>3&&(world2D.logo.scaleX=world2D.logo.scaleY=3*(9-tt)/6+.8*(tt-3)/6,world2D.logo.x=800*(9-tt)/6+250*(tt-3)/6,world2D.logo.y=450*(9-tt)/6+70*(tt-3)/6),gameMD=.9*gameMD+.1*gameMDTarget,world2D.mBtnBG.x=1067.8*(4-gameMD)/3+1470*(gameMD-1)/3,Math.abs(gameMD-gameMDTarget)<.01&&(gameMD=gameMDTarget),dragBtn.visible=!world2D.chAuto.checked,world2D.chAuto.checked&&(screenX+=screenXDir,screenXDir>0&&screenX>50?(screenX=50,screenXDir=-.2):screenXDir<0&&screenX<-50&&(screenX=-50,screenXDir=.2),dragBtn.position.x=screenX),world2D.controlNSlit.visible=2===gameMD,world2D.controlPhasor.visible=1===gameMD,1===gameMD){let R=50,T=.3,m=[];connectLines.geometry.dispose();for(var e=0;e<walls.length;e++){(p=walls[e]).visible=e<=2,0===e?(p.scale.x=.5,p.position.x=-.5*slitD0-25-.5*gap):2===e?(p.scale.x=.5,p.position.x=.5*slitD0+25+.5*gap):(p.scale.x=(slitD0-gap)/100,p.position.x=(e-1)*slitD0)}var t=Math.atan2(screenX+.5*slitD0,screenR),n=Math.atan2(screenX-.5*slitD0,screenR);for(e=0;e<nnMax;e++){if((d=arrowsSlit[e]).visible=0===e||e===nnMax/2||world2D.controlPhasor.chEERR.checked,d.scale.x=1,(M=arrowsScreen[e]).visible=world2D.controlPhasor.chEEZZ.checked,M.mat.color.setHSL(e/nnSlit*300/360,1,.5),(w=arrowsCircle[e]).visible=e<6&&world2D.chSum.checked,w.mat.color.setHSL(e/2*300/360,1,.5),e<nnMax/2?(d.mat.color.setHSL(75/360,1,.5),d.position.x=e/16*R*Math.sin(t)-.5*slitD0,d.position.y=0,d.position.z=e/16*R*Math.cos(t),d.scale.y=arrL*Math.cos(e/16*2*Math.PI-T*tt)/100,M.mat.color.setHSL(0,1,.5),M.position.x=e/16*R*Math.sin(t)-.5*slitD0,M.position.y=0,M.position.z=e/16*R*Math.cos(t),M.rotation.z=e/16*2*Math.PI-T*tt):(d.mat.color.setHSL(.625,1,.5),d.position.x=(e-nnMax/2)/16*R*Math.sin(n)+.5*slitD0,d.position.y=0,d.position.z=(e-nnMax/2)/16*R*Math.cos(n),d.scale.y=arrL*Math.cos((e-nnMax/2)/16*2*Math.PI-T*tt)/100,M.mat.color.setHSL(150/360,1,.5),M.position.x=(e-nnMax/2)/16*R*Math.sin(n)+.5*slitD0,M.position.y=0,M.position.z=(e-nnMax/2)/16*R*Math.cos(n),M.rotation.z=(e-nnMax/2)/16*2*Math.PI-T*tt),2===e?(w.mat.color.setHSL(75/360,1,.5),w.position.x=screenX,w.position.y=0,w.position.z=screenR,w.rotation.z=0,w.scale.y=arrL*Math.cos(2*Math.PI/lambda*screenX*slitD0/2/screenR-T*tt)/100,w.visible=world2D.controlPhasor.chEERR.checked):3===e?(w.mat.color.setHSL(0,1,.5),w.position.x=screenX,w.position.y=0,w.position.z=screenR+.1,w.rotation.z=2*Math.PI/lambda*screenX*slitD0/2/screenR-T*tt,w.scale.y=arrL/100,w.visible=world2D.controlPhasor.chEEZZ.checked):4===e?(w.mat.color.setHSL(.625,1,.5),w.position.x=screenX,w.position.y=0,w.position.z=screenR+.2,w.rotation.z=0,w.scale.y=arrL*Math.cos(-2*Math.PI/lambda*screenX*slitD0/2/screenR-T*tt)/100,w.visible=world2D.controlPhasor.chEERR.checked):5===e&&(w.mat.color.setHSL(150/360,1,.5),w.position.x=screenX,w.position.y=0,w.position.z=screenR+.3,w.rotation.z=-2*Math.PI/lambda*screenX*slitD0/2/screenR-T*tt,w.scale.y=arrL/100,w.visible=world2D.controlPhasor.chEEZZ.checked),e<2){var o=maxE0/2/arrL;if(0===e)var i=0,a=0;else if(1===e)i=arrowsCircle[e-1].position.x+arrL*Math.sin(-arrowsCircle[e-1].rotation.z)*o,a=arrowsCircle[e-1].position.y+arrL*Math.cos(-arrowsCircle[e-1].rotation.z)*o;w.position.x=i,w.position.y=a,w.position.z=screenR+15+.1*e,w.rotation.z=2*Math.PI*(screenX*slitD0*e)/(screenR*lambda),w.scale.y=o*arrL/100}e<2&&m.push(new THREE.Vector3((e-1+.5)*slitD0,0,0),new THREE.Vector3(screenX,0,screenR))}m.push(new THREE.Vector3(-50,0,screenR),new THREE.Vector3(50,0,screenR)),connectLines.geometry=(new THREE.BufferGeometry).setFromPoints(m);for(e=0;e<nnLine;e++){var s=slitD0*(H=100*(e-nnLine/2)/nnLine)/screenR/lambda-Math.round(slitD0*H/screenR/lambda)==0?2:Math.sin(2*slitD0*H/screenR/lambda*Math.PI)/Math.sin(slitD0*H/screenR/lambda*Math.PI);s*=maxE0/2,lineEE.setPoint(e,H,Math.abs(s),screenR),lineII.setPoint(e,H,s*s/maxE0,screenR)}lineEE.update(),lineII.update(),lineEE.visible=0===EEIIMD,lineII.visible=1===EEIIMD,lineCircle1.visible=!1;i=arrowsCircle[1].position.x+arrL*Math.sin(-arrowsCircle[1].rotation.z)*o,a=arrowsCircle[1].position.y+arrL*Math.cos(-arrowsCircle[1].rotation.z)*o;var r=arrowsCircle[1].position.z;lineCircle0.setPoint(0,0,0,r),lineCircle0.setPoint(1,i,a,r),lineCircle0.update(),lineCircle0.visible=world2D.chSum.checked,lineENow.setPoint(0,screenX,0,screenR-.5),lineENow.setPoint(1,screenX,Math.sqrt(i*i+a*a),screenR-.5),lineENow.update(),lineENow.visible=0===EEIIMD&&world2D.chSum.checked;let b=sCanvas.imageData.data;for(var l=0;l<512;l++)for(var c=(s=slitD0*(H=100*(l-256)/512)/screenR/lambda-Math.round(slitD0*H/screenR/lambda)==0?2:Math.sin(2*slitD0*H/screenR/lambda*Math.PI)/Math.sin(slitD0*H/screenR/lambda*Math.PI))*s/2/2,E=0;E<32;E++){var h=Math.exp(-Math.pow((E-16)/10,2));b[4*(512*E+l)+0]=255*c*h,b[4*(512*E+l)+1]=255*c*h,b[4*(512*E+l)+2]=0,b[4*(512*E+l)+3]=255}sCanvas.ctx.putImageData(sCanvas.imageData,0,0),sCanvas.material.map.needsUpdate=!0}else if(2===gameMD){let t=[];connectLines.geometry.dispose();for(e=0;e<walls.length;e++){(p=walls[e]).visible=e<=nnSlit,0===e?(p.scale.x=.5,p.position.x=(-nnSlit/2+.5)*slitD0-25-.5*gap):e===nnSlit?(p.scale.x=.5,p.position.x=(nnSlit/2-.5)*slitD0+25+.5*gap):(p.scale.x=(slitD0-gap)/100,p.position.x=(e-nnSlit/2)*slitD0)}for(e=0;e<nnMax;e++){(d=arrowsSlit[e]).visible=e<nnSlit,d.scale.y=arrL/100,d.scale.x=1,d.mat.color.setHSL(e/nnSlit*300/360,1,.5),d.position.x=(e-nnSlit/2+.5)*slitD0,d.position.y=0,d.position.z=0,(M=arrowsScreen[e]).visible=e<nnSlit,M.mat.color.setHSL(e/nnSlit*300/360,1,.5),M.position.x=screenX,M.position.z=screenR,M.rotation.z=2*Math.PI*(screenX*slitD0*e)/(screenR*lambda),(w=arrowsCircle[e]).visible=e<nnSlit&&world2D.chSum.checked,w.mat.color.setHSL(e/nnSlit*300/360,1,.5);o=maxE0/nnSlit/arrL;if(0===e)i=0,a=0;else i=arrowsCircle[e-1].position.x+arrL*Math.sin(-arrowsCircle[e-1].rotation.z)*o,a=arrowsCircle[e-1].position.y+arrL*Math.cos(-arrowsCircle[e-1].rotation.z)*o;w.position.x=i,w.position.y=a,w.position.z=screenR+15+.1*e,w.rotation.z=2*Math.PI*(screenX*slitD0*e)/(screenR*lambda),w.scale.y=o*arrL/100,e<nnSlit&&t.push(new THREE.Vector3((e-nnSlit/2+.5)*slitD0,0,0),new THREE.Vector3(screenX,0,screenR))}t.push(new THREE.Vector3(-50,0,screenR),new THREE.Vector3(50,0,screenR)),connectLines.geometry=(new THREE.BufferGeometry).setFromPoints(t);for(e=0;e<nnLine;e++){s=slitD0*(H=100*(e-nnLine/2)/nnLine)/screenR/lambda-Math.round(slitD0*H/screenR/lambda)==0?nnSlit:Math.sin(nnSlit*slitD0*H/screenR/lambda*Math.PI)/Math.sin(slitD0*H/screenR/lambda*Math.PI);s*=maxE0/nnSlit,lineEE.setPoint(e,H,Math.abs(s),screenR),lineII.setPoint(e,H,s*s/maxE0,screenR)}lineEE.update(),lineII.update(),lineEE.visible=0===EEIIMD,lineII.visible=1===EEIIMD,lineCircle1.visible=!1;i=arrowsCircle[nnSlit-1].position.x+arrL*Math.sin(-arrowsCircle[nnSlit-1].rotation.z)*o,a=arrowsCircle[nnSlit-1].position.y+arrL*Math.cos(-arrowsCircle[nnSlit-1].rotation.z)*o,r=arrowsCircle[nnSlit-1].position.z;lineCircle0.setPoint(0,0,0,r),lineCircle0.setPoint(1,i,a,r),lineCircle0.update(),lineCircle0.visible=world2D.chSum.checked,lineENow.setPoint(0,screenX,0,screenR-.5),lineENow.setPoint(1,screenX,Math.sqrt(i*i+a*a),screenR-.5),lineENow.update(),lineENow.visible=0===EEIIMD&&world2D.chSum.checked,world2D.controlNSlit.textNN.text=String(nnSlit);let n=sCanvas.imageData.data;for(l=0;l<512;l++)for(s=slitD0*(H=100*(l-256)/512)/screenR/lambda-Math.round(slitD0*H/screenR/lambda)==0?nnSlit:Math.sin(nnSlit*slitD0*H/screenR/lambda*Math.PI)/Math.sin(slitD0*H/screenR/lambda*Math.PI),c=(s/=nnSlit)*s,E=0;E<32;E++){h=Math.exp(-Math.pow((E-16)/10,2));n[4*(512*E+l)+0]=255*c*h,n[4*(512*E+l)+1]=255*c*h,n[4*(512*E+l)+2]=0,n[4*(512*E+l)+3]=255}sCanvas.ctx.putImageData(sCanvas.imageData,0,0),sCanvas.material.map.needsUpdate=!0}else if(3===gameMD){let t=[];connectLines.geometry.dispose();for(e=0;e<walls.length;e++){(p=walls[e]).visible=e<2,0===e?(p.scale.x=.5,p.position.x=-.5*slitBB-25-.2*gap):1===e&&(p.scale.x=.5,p.position.x=.5*slitBB+25+.2*gap)}for(e=0;e<nnMax;e++){(d=arrowsSlit[e]).visible=e<nnMax/2,d.scale.x=.5,d.scale.y=arrL/100,d.mat.color.setHSL(e/nnMax*2*300/360,1,.5),d.position.x=(e-nnMax/4)/(nnMax/2)*slitBB,d.position.z=0,d.position.y=0,(M=arrowsScreen[e]).visible=e<nnMax/2,M.mat.color.setHSL(e/nnMax*2*300/360,1,.5),M.position.x=screenX,M.position.z=screenR+.02*e,M.rotation.z=2*Math.PI*(screenX*slitBB*e/(nnMax/2))/(screenR*lambda),(w=arrowsCircle[e]).visible=e<nnMax/2&&world2D.chSum.checked,w.mat.color.setHSL(e/nnMax*2*300/360,1,.5);o=maxE0/nnMax/arrL*2;if(0===e)i=0,a=0;else i=arrowsCircle[e-1].position.x+arrL*Math.sin(-arrowsCircle[e-1].rotation.z)*o,a=arrowsCircle[e-1].position.y+arrL*Math.cos(-arrowsCircle[e-1].rotation.z)*o;w.position.x=i,w.position.y=a,w.position.z=screenR+15+.02*e,w.rotation.z=2*Math.PI*(screenX*slitBB*e/(nnMax/2))/(screenR*lambda),w.scale.y=o*arrL/100}t.push(new THREE.Vector3(-.5*slitBB,0,0),new THREE.Vector3(screenX,0,screenR)),t.push(new THREE.Vector3(.5*slitBB,0,0),new THREE.Vector3(screenX,0,screenR)),t.push(new THREE.Vector3(-50,0,screenR),new THREE.Vector3(50,0,screenR)),connectLines.geometry=(new THREE.BufferGeometry).setFromPoints(t);for(e=0;e<nnLine;e++){s=0===(H=100*(e-nnLine/2)/nnLine)?1:Math.sin(slitBB*H/screenR/lambda*Math.PI)/(slitBB*H/screenR/lambda*Math.PI);s*=30,lineEE.setPoint(e,H,Math.abs(s),screenR),lineII.setPoint(e,H,s*s/30,screenR)}lineEE.update(),lineII.update(),lineEE.visible=0===EEIIMD,lineII.visible=1===EEIIMD,lineCircle1.visible=!1;i=arrowsCircle[nnMax/2-1].position.x+arrL*Math.sin(-arrowsCircle[nnMax/2-1].rotation.z)*o,a=arrowsCircle[nnMax/2-1].position.y+arrL*Math.cos(-arrowsCircle[nnMax/2-1].rotation.z)*o,r=arrowsCircle[nnMax/2-1].position.z;lineCircle0.setPoint(0,0,0,r),lineCircle0.setPoint(1,i,a,r),lineCircle0.update(),lineENow.setPoint(0,screenX,0,screenR-.5),lineENow.setPoint(1,screenX,Math.sqrt(i*i+a*a),screenR-.5),lineENow.update(),lineENow.visible=0===EEIIMD;let n=sCanvas.imageData.data;for(l=0;l<512;l++)for(s=0===(H=100*(l-256)/512)?1:Math.sin(slitBB*H/screenR/lambda*Math.PI)/(slitBB*H/screenR/lambda*Math.PI),c=Math.pow(s*s,1/1.5),E=0;E<32;E++){h=Math.exp(-Math.pow((E-16)/10,2));n[4*(512*E+l)+0]=255*c*h,n[4*(512*E+l)+1]=255*c*h,n[4*(512*E+l)+2]=0,n[4*(512*E+l)+3]=255}sCanvas.ctx.putImageData(sCanvas.imageData,0,0),sCanvas.material.map.needsUpdate=!0}else if(4===gameMD){let t=[];connectLines.geometry.dispose();for(e=0;e<walls.length;e++){var p;(p=walls[e]).visible=e<=2,0===e?(p.scale.x=.5,p.position.x=-.5*slitDD-.5*slitBB-25-.2*gap):2===e?(p.scale.x=.5,p.position.x=.5*slitDD+.5*slitBB+25+.2*gap):(p.scale.x=(slitDD-slitBB-.4*gap)/100,p.position.x=0)}for(e=0;e<nnMax;e++){var d,M,w;(d=arrowsSlit[e]).visible=!0,d.scale.x=.5,d.mat.color.setHSL(e/nnMax*300/360,1,.5),d.position.x=e<nnMax/2?-.5*slitDD+(e-nnMax/4)/(nnMax/2)*slitBB:.5*slitDD+(e-nnMax/4*3)/(nnMax/2)*slitBB,(M=arrowsScreen[e]).visible=!0,M.mat.color.setHSL(e/nnMax*300/360,1,.5),M.position.x=screenX,M.position.z=screenR+.02*e,M.rotation.z=e<nnMax/2?2*Math.PI*(screenX*slitBB*e/(nnMax/2))/(screenR*lambda):2*Math.PI*(screenX*(slitBB*(e-nnMax/2)/(nnMax/2)+slitDD))/(screenR*lambda),(w=arrowsCircle[e]).visible=world2D.chSum.checked,w.mat.color.setHSL(e/nnMax*300/360,1,.5);o=maxE0/nnMax/arrL;if(0===e)i=0,a=0;else i=arrowsCircle[e-1].position.x+arrL*Math.sin(-arrowsCircle[e-1].rotation.z)*o,a=arrowsCircle[e-1].position.y+arrL*Math.cos(-arrowsCircle[e-1].rotation.z)*o;w.position.x=i,w.position.y=a,w.position.z=screenR+15+.02*e,w.rotation.z=e<nnMax/2?2*Math.PI*(screenX*slitBB*e/(nnMax/2))/(screenR*lambda):2*Math.PI*(screenX*(slitBB*(e-nnMax/2)/(nnMax/2)+slitDD))/(screenR*lambda),w.scale.y=o*arrL/100}t.push(new THREE.Vector3(-.5*slitDD-.5*slitBB,0,0),new THREE.Vector3(screenX,0,screenR)),t.push(new THREE.Vector3(-.5*slitDD+.5*slitBB,0,0),new THREE.Vector3(screenX,0,screenR)),t.push(new THREE.Vector3(.5*slitDD-.5*slitBB,0,0),new THREE.Vector3(screenX,0,screenR)),t.push(new THREE.Vector3(.5*slitDD+.5*slitBB,0,0),new THREE.Vector3(screenX,0,screenR)),t.push(new THREE.Vector3(-50,0,screenR),new THREE.Vector3(50,0,screenR)),connectLines.geometry=(new THREE.BufferGeometry).setFromPoints(t);for(e=0;e<nnLine;e++){s=0===(H=100*(e-nnLine/2)/nnLine)?1:Math.sin(slitBB*H/screenR/lambda*Math.PI)/(slitBB*H/screenR/lambda*Math.PI)*Math.cos(slitDD*H/screenR/lambda*Math.PI);s*=30,lineEE.setPoint(e,H,Math.abs(s),screenR),lineII.setPoint(e,H,s*s/30,screenR)}lineEE.update(),lineII.update(),lineEE.visible=0===EEIIMD,lineII.visible=1===EEIIMD,lineCircle1.visible=!0;i=arrowsCircle[nnMax-1].position.x+arrL*Math.sin(-arrowsCircle[nnMax-1].rotation.z)*o,a=arrowsCircle[nnMax-1].position.y+arrL*Math.cos(-arrowsCircle[nnMax-1].rotation.z)*o,r=arrowsCircle[nnMax-1].position.z;lineCircle0.setPoint(0,0,0,r),lineCircle0.setPoint(1,i,a,r),lineCircle0.update();var R=arrowsCircle[nnMax/2-1].position.x+arrL*Math.sin(-arrowsCircle[nnMax/2-1].rotation.z)*o,T=arrowsCircle[nnMax/2-1].position.y+arrL*Math.cos(-arrowsCircle[nnMax/2-1].rotation.z)*o,m=arrowsCircle[nnMax/2-1].position.z;lineCircle1.setPoint(0,0,0,r),lineCircle1.setPoint(1,R,T,m),lineCircle1.setPoint(2,i,a,r),lineCircle1.update(),lineENow.setPoint(0,screenX,0,screenR-.5),lineENow.setPoint(1,screenX,Math.sqrt(i*i+a*a),screenR-.5),lineENow.update(),lineENow.visible=0===EEIIMD;let n=sCanvas.imageData.data;for(l=0;l<512;l++){var H;for(s=0===(H=100*(l-256)/512)?1:Math.sin(slitBB*H/screenR/lambda*Math.PI)/(slitBB*H/screenR/lambda*Math.PI)*Math.cos(slitDD*H/screenR/lambda*Math.PI),c=Math.pow(s*s,1/1.5),E=0;E<32;E++){h=Math.exp(-Math.pow((E-16)/10,2));n[4*(512*E+l)+0]=255*c*h,n[4*(512*E+l)+1]=255*c*h,n[4*(512*E+l)+2]=0,n[4*(512*E+l)+3]=255}}sCanvas.ctx.putImageData(sCanvas.imageData,0,0),sCanvas.material.map.needsUpdate=!0}sCanvas.mesh.visible=lineII.visible,zoomRatio=.92*zoomRatio+.08*zoomRatioTarget,world3D.cameraTarget.z=500*zoomRatio,world3D.cameraTarget.y=.5*maxE0*zoomRatio,world3D.render(),world2D.stage.update()}function clickMBtn(e){var t=e.target.name;"mBtnPhasor"===t?gameMDTarget=1:"mBtnNSlit"===t?gameMDTarget=2:"mBtnSSlitD"===t?gameMDTarget=3:"mBtnDSlitD"===t&&(gameMDTarget=4)}function clickPN(e){var t=e.target.name;"btnPlus"===t&&nnSlit<20?nnSlit++:"btnMinus"===t&&nnSlit>2&&nnSlit--}function myMouseDown(e){var t=getMouse3D();Math.abs(t.x-dragBtn.position.x)<3.7&&Math.abs(t.z-dragBtn.position.z)<5&&dragBtn.visible?dragBtn.isDraging=!0:world3D.camera.isDraging=!0,world3D.camera.oldMouseX=stage2D.mouseX,world3D.camera.oldMouseY=stage2D.mouseY}function myMouseMove(e){if(world3D.camera.isDraging&&world3D.cameraDragAndRotate){var t=stage2D.mouseX,n=stage2D.mouseY;for(world3D.cameraPhi-=.005*(t-world3D.camera.oldMouseX);world3D.cameraPhi>Math.PI;)world3D.cameraPhi-=2*Math.PI;for(;world3D.cameraPhi<-Math.PI;)world3D.cameraPhi+=2*Math.PI;world3D.cameraTheta-=.005*(n-world3D.camera.oldMouseY),world3D.cameraTheta>.9999*Math.PI&&(world3D.cameraTheta=.9999*Math.PI),world3D.cameraTheta<1e-4*Math.PI&&(world3D.cameraTheta=1e-4*Math.PI),world3D.camera.oldMouseX=t,world3D.camera.oldMouseY=n}else if(dragBtn.isDraging){var o=getMouse3D().x;o>50?o=50:o<-50&&(o=-50),dragBtn.position.x=o,screenX=o}}function myMouseUp(e){world3D.camera.isDraging=!1,dragBtn.isDraging=!1}MyJS.myResize(),world2D.btn3D.on("mousedown",myMouseDown),world2D.btn3D.on("pressmove",myMouseMove),world2D.btn3D.on("pressup",myMouseUp);var TEACHER={ObjArrow2:function(e,t,n){let o=new THREE.MeshBasicMaterial({color:n||16711935}),i=new THREE.ConeGeometry(e||10,40,4);this.ArrowHead=new THREE.Mesh(i,o),this.ArrowHead.position.y=80,i=new THREE.CylinderGeometry(.5*(e||10),.5*(e||10),60,4,1),this.ArrowBody=new THREE.Mesh(i,o),this.ArrowBody.position.y=30,THREE.Object3D.call(this),this.rotX=new THREE.Object3D,this.rotY=new THREE.Object3D,this.add(this.rotY),this.rotY.add(this.rotX),this.rotX.add(this.ArrowBody),this.rotX.add(this.ArrowHead),this.scale.y=t/100,this.scale.z=.1,this.mat=o}};TEACHER.ObjArrow2.prototype=Object.create(THREE.Object3D.prototype),TEACHER.ObjArrow2.prototype.constructor=TEACHER.ObjArrow2,TEACHER.ObjHPlane=function(e,t,n){let o=new THREE.MeshBasicMaterial({color:n||16711935});o.side=2;let i=new THREE.BoxGeometry(e||10,e||10,100);this.pBody=new THREE.Mesh(i,o),this.pBody.position.z=50,this.pBody.rotation.x=Math.PI/2,THREE.Object3D.call(this),this.scaZ=new THREE.Object3D,this.rotY=new THREE.Object3D,this.add(this.rotY),this.rotY.add(this.scaZ),this.scaZ.add(this.pBody),this.scale.y=t/100,this.scale.z=.1,this.mat=o},TEACHER.ObjHPlane.prototype=Object.create(THREE.Object3D.prototype),TEACHER.ObjHPlane.prototype.constructor=TEACHER.ObjHPlane,TEACHER.ObjHPlane.prototype.setXZ=function(e,t){var n=e*e+t*t,o=Math.sqrt(n),i=Math.atan2(e,t);this.scaZ.scale.z=o/100,this.pBody.position.z=.5*o,this.rotY.rotation.y=i},TEACHER.ObjPlane=function(e,t,n,o,i){let a=this;a.mat=new TEACHER.MSMat(n,i),a.geo=new THREE.PlaneGeometry(e||10,t||10,1,1),a.mesh=new THREE.Mesh(a.geo,a.mat),"x"===o?a.mesh.rotation.y=.5*Math.PI:"y"===o&&(a.mesh.rotation.x=-.5*Math.PI),THREE.Object3D.call(this,a.geo,a.mat),a.add(a.mesh)},TEACHER.ObjPlane.prototype=Object.create(THREE.Object3D.prototype),TEACHER.ObjPlane.prototype.constructor=TEACHER.ObjPlane,TEACHER.ObjCylinder=function(e,t,n,o,i,a){let s=this;s.mat=new TEACHER.MSMat(n,a),s.geo=new THREE.CylinderGeometry(e||10,e||10,t||10,32,2,o),s.mesh=new THREE.Mesh(s.geo,s.mat),"x"===i?s.mesh.rotation.z=-.5*Math.PI:"z"===i&&(s.mesh.rotation.x=.5*Math.PI),THREE.Object3D.call(this,s.geo,s.mat),s.add(s.mesh)},TEACHER.ObjCylinder.prototype=Object.create(THREE.Object3D.prototype),TEACHER.ObjCylinder.prototype.constructor=TEACHER.ObjCylinder,TEACHER.ObjSphere=function(e,t,n){let o=this;o.mat=new TEACHER.MSMat(t,n),o.geo=new THREE.SphereGeometry(e||10,32,16),o.mesh=new THREE.Mesh(o.geo,o.mat),THREE.Object3D.call(this,o.geo,o.mat),o.add(o.mesh)},TEACHER.ObjSphere.prototype=Object.create(THREE.Object3D.prototype),TEACHER.ObjSphere.prototype.constructor=TEACHER.ObjSphere,TEACHER.ObjBox=function(e,t,n,o,i){let a=this;a.mat=new TEACHER.MSMat(o,i),a.geo=new THREE.BoxGeometry(e||10,t||10,n||10),a.mesh=new THREE.Mesh(a.geo,a.mat),THREE.Object3D.call(this,a.geo,a.mat),a.add(a.mesh)},TEACHER.ObjBox.prototype=Object.create(THREE.Object3D.prototype),TEACHER.ObjBox.prototype.constructor=TEACHER.ObjBox,TEACHER.MSMat=function(e,t){THREE.MeshStandardMaterial.call(this,{color:e||16711935,roughness:.4,side:t||0})},TEACHER.MSMat.prototype=Object.create(THREE.MeshStandardMaterial.prototype),TEACHER.MSMat.prototype.constructor=TEACHER.MSMat,TEACHER.ObjPicPlane=function(e,t,n,o,i){let a=this,s=(new THREE.TextureLoader).load(n);a.mat=new THREE.MeshBasicMaterial({map:s,transparent:!0,side:i||0}),a.geo=new THREE.PlaneGeometry(e,t,1,1),a.mesh=new THREE.Mesh(a.geo,a.mat),"x"===o?a.mesh.rotation.y=.5*Math.PI:"y"===o&&(a.mesh.rotation.x=-.5*Math.PI),THREE.Object3D.call(this),a.add(a.mesh)},TEACHER.ObjPicPlane.prototype=Object.create(THREE.Object3D.prototype),TEACHER.ObjPicPlane.prototype.constructor=TEACHER.ObjPicPlane,TEACHER.ObjPicCylinder=function(e,t,n,o,i,a){let s=this,r=(new THREE.TextureLoader).load(n);s.mat=new THREE.MeshBasicMaterial({map:r,side:a||0}),s.geo=new THREE.CylinderGeometry(e||10,e||10,t||10,32,4,o),s.mesh=new THREE.Mesh(s.geo,s.mat),"x"===i?s.mesh.rotation.z=-.5*Math.PI:"z"===i?(s.mesh.rotation.y=.5*Math.PI,s.mesh.rotation.x=.5*Math.PI):"y"===i&&(s.mesh.rotation.y=.5*Math.PI),THREE.Object3D.call(this,s.geo,s.mat),s.add(s.mesh)},TEACHER.ObjPicCylinder.prototype=Object.create(THREE.Object3D.prototype),TEACHER.ObjPicCylinder.prototype.constructor=TEACHER.ObjPicCylinder,TEACHER.ObjPicSphere=function(e,t,n){let o=this,i=(new THREE.TextureLoader).load(t);o.mat=new THREE.MeshBasicMaterial({map:i,side:n||0}),o.geo=new THREE.SphereGeometry(e||10,32,16),o.mesh=new THREE.Mesh(o.geo,o.mat),THREE.Object3D.call(this,o.geo,o.mat),o.add(o.mesh)},TEACHER.ObjPicSphere.prototype=Object.create(THREE.Object3D.prototype),TEACHER.ObjPicSphere.prototype.constructor=TEACHER.ObjPicSphere,TEACHER.ObjArrow=function(e,t){let n=new THREE.MeshStandardMaterial({color:t||16711935,roughness:.4}),o=new THREE.ConeGeometry(e||10,40,32);this.ArrowHead=new THREE.Mesh(o,n),this.ArrowHead.position.y=80,o=new THREE.CylinderGeometry(.5*(e||10),.5*(e||10),60,32,2),this.ArrowBody=new THREE.Mesh(o,n),this.ArrowBody.position.y=30,THREE.Object3D.call(this),this.rotX=new THREE.Object3D,this.rotY=new THREE.Object3D,this.add(this.rotY),this.rotY.add(this.rotX),this.rotX.add(this.ArrowBody),this.rotX.add(this.ArrowHead)},TEACHER.ObjArrow.prototype=Object.create(THREE.Object3D.prototype),TEACHER.ObjArrow.prototype.constructor=TEACHER.ObjArrow,TEACHER.ObjArrow.prototype.setArrow=function(e,t,n){let o=e*e+t*t+n*n,i=Math.sqrt(o);o>0?(this.rotX.visible=!0,this.rotX.scale.y=i/100):this.rotX.visible=!1,this.rotX.rotation.x=Math.acos(t/i),this.rotY.rotation.y=Math.atan2(e,n)},TEACHER.ObjSpring=function(e,t,n,o,i){let a=e||20;this.L0=a;let s=[],r=o||5,l=t||5,c=n||.5;s.push(new THREE.Vector3(0,0,0)),s.push(new THREE.Vector3(0,.05*a,0));for(var E=0;E<=16*r;E++)s.push(new THREE.Vector3(l*Math.cos(2*E*Math.PI/16),a*(.05+.9*E/r/16),l*Math.sin(2*E*Math.PI/16)));s.push(new THREE.Vector3(0,.95*a,0)),s.push(new THREE.Vector3(0,a,0));let h=new THREE.CatmullRomCurve3(s),p=new THREE.MeshStandardMaterial({color:i||16711935,roughness:.4}),d=new THREE.TubeGeometry(h,500,c,12);this.mesh=new THREE.Mesh(d,p),THREE.Object3D.call(this),this.rotX=new THREE.Object3D,this.rotY=new THREE.Object3D,this.add(this.rotY),this.rotY.add(this.rotX),this.rotX.add(this.mesh)},TEACHER.ObjSpring.prototype=Object.create(THREE.Object3D.prototype),TEACHER.ObjSpring.prototype.constructor=TEACHER.ObjSpring,TEACHER.ObjSpring.prototype.setSpring=function(e,t,n){let o=e*e+t*t+n*n,i=Math.sqrt(o);o>0?(this.rotX.visible=!0,this.rotX.scale.y=i/this.L0):this.rotX.visible=!1,this.rotX.rotation.x=Math.acos(t/i),this.rotY.rotation.y=Math.atan2(e,n)},TEACHER.Points=function(e,t,n){let o=this,i=t||1,a=e||16711935,s=new THREE.Color(a);o.nnMax=n||1e4,o.nnNow=0,o.geometry=new THREE.BufferGeometry,o.positions=[],o.geometry.setAttribute("position",new THREE.Float32BufferAttribute(o.positions,3)),o.geometry.computeBoundingSphere();let r=new THREE.PointsMaterial({size:i,map:o.createCanvasMaterial("#"+s.getHexString(),64),transparent:!0,depthWrite:!1});THREE.Points.call(this,o.geometry,r)},TEACHER.Points.prototype=Object.create(THREE.Points.prototype),TEACHER.Points.prototype.constructor=TEACHER.Points,TEACHER.Points.prototype.createCanvasMaterial=function(e,t){var n=document.createElement("canvas");n.width=n.height=t;var o=n.getContext("2d");o.imageSmoothingEnabled=!1;var i=new THREE.Texture(n),a=t/2;return o.beginPath(),o.arc(a,a,t/2-3,0,2*Math.PI,!1),o.closePath(),o.fillStyle=e,o.fill(),i.needsUpdate=!0,i},TEACHER.Points.prototype.addPoint=function(e,t,n){let o=this;o.nnNow<o.nnMax?o.nnNow++:(log("TEACHER.Points 到達最大點數"),o.positions.shift(),o.positions.shift(),o.positions.shift()),o.positions.push(e,t,n)},TEACHER.Points.prototype.clear=function(){this.positions=[],this.nnNow=0,this.update()},TEACHER.Points.prototype.setPoint=function(e,t,n,o){let i=this;e>i.nnMax?log("輸入的n值大於TEACHER.Points 最大點數 nnMax"):e>i.nnNow?log("輸入的n值大於TEACHER.Points 現在點數 nnNow"):(i.positions[3*e]=t,i.positions[3*e+1]=n,i.positions[3*e+2]=o)},TEACHER.Points.prototype.getPoint=function(e){let t=this,n=new THREE.Vector3;return e>t.nnMax?log("輸入的n值大於TEACHER.Points 最大點數 nnMax"):e>t.nnNow?log("輸入的n值大於TEACHER.Points 現在點數 nnNow"):(n.x=t.positions[3*e],n.y=t.positions[3*e+1],n.z=t.positions[3*e+2]),n},TEACHER.Points.prototype.update=function(){this.geometry.setAttribute("position",new THREE.Float32BufferAttribute(this.positions,3)),this.geometry.computeBoundingSphere(),this.geometry.attributes.position.needsUpdate=!0},TEACHER.Line=function(e,t,n){let o=this;o.nnMax=n||1e4,o.lineWidth=t||1,o.nnNow=0;var i=new THREE.LineMaterial({color:e||16711935,linewidth:t||1});i.resolution.set(window.innerWidth,window.innerHeight),o.geometry=new THREE.LineGeometry,o.positions=new Float32Array(3*o.nnMax),o.geometry.setPositions(o.positions),THREE.Line2.call(this,o.geometry,i)},TEACHER.Line.prototype=Object.create(THREE.Line2.prototype),TEACHER.Line.prototype.constructor=TEACHER.Line,TEACHER.Line.prototype.addPoint=function(e,t,n){let o=this;if(o.nnNow<o.nnMax)o.nnNow++;else{log("TEACHER.Line 到達最大點數");for(var i=0;i<o.nnMax-1;i++)o.positions[3*i]=o.positions[3*i+3],o.positions[3*i+1]=o.positions[3*i+4],o.positions[3*i+2]=o.positions[3*i+5]}for(i=o.nnNow;i<=o.nnMax;i++)o.positions[3*(i-1)]=e,o.positions[3*(i-1)+1]=t,o.positions[3*(i-1)+2]=n},TEACHER.Line.prototype.clear=function(){this.positions=new Float32Array(3*this.nnMax),this.nnNow=0,this.update()},TEACHER.Line.prototype.setPoint=function(e,t,n,o){let i=this;e>i.nnMax?log("輸入的n值大於TEACHER.Line 最大點數 nnMax"):e>i.nnNow?log("輸入的n值大於TEACHER.Line 現在點數 nnNow"):(i.positions[3*e]=t,i.positions[3*e+1]=n,i.positions[3*e+2]=o)},TEACHER.Line.prototype.getPoint=function(e){let t=this,n=new THREE.Vector3;return e>t.nnMax?log("輸入的n值大於TEACHER.Line 最大點數 nnMax"):e>t.nnNow?log("輸入的n值大於TEACHER.Line 現在點數 nnNow"):(n.x=t.positions[3*e],n.y=t.positions[3*e+1],n.z=t.positions[3*e+2]),n},TEACHER.Line.prototype.update=function(){let e=this,t=e.getPoint(e.nnNow-1);for(var n=e.nnNow;n<=e.nnMax;n++)e.positions[3*n]=t.x,e.positions[3*n+1]=t.y,e.positions[3*n+2]=t.z;e.geometry.setPositions(e.positions)},TEACHER.ObjTextPlane=function(e,t,n,o,i,a){let s=this,r=Math.round(Math.log2(e/t)),l=$("<canvas>").attr("width",String(128*Math.pow(2,r))).attr("height","128");s.stage=new createjs.Stage(l[0]);let c=new createjs.Container;if(a){let e=new createjs.Shape,t=new THREE.Color(a);e.graphics.c().f("#"+t.getHexString()).dr(0,0,128*Math.pow(2,r),128),c.addChild(e)}s.ctext=new createjs.Text;let E=new THREE.Color(i||16777215);s.ctext.color="#"+E.getHexString(),s.ctext.font="96px Arial",s.ctext.text=n||"",s.ctext.textAlign="center",s.ctext.textBaseline="middle",s.ctext.x=128*Math.pow(2,r)/2,s.ctext.y=64,c.addChild(s.ctext),s.stage.addChild(c),s.stage.update(),s.texture=new THREE.Texture(l[0]);var h=new THREE.MeshBasicMaterial({map:s.texture,transparent:!0}),p=new THREE.PlaneGeometry(e||10,t||10,1,1);s.texture.needsUpdate=!0,s.plane1=new THREE.Mesh(p,h),s.plane2=new THREE.Mesh(p,h),s.plane2.rotation.y=Math.PI;let d=new THREE.Object3D;d.add(s.plane1).add(s.plane2),"x"===o?d.rotation.y=.5*Math.PI:"y"===o&&(d.rotation.x=-.5*Math.PI),THREE.Object3D.call(this),s.add(d)},TEACHER.ObjTextPlane.prototype=Object.create(THREE.Object3D.prototype),TEACHER.ObjTextPlane.prototype.constructor=TEACHER.ObjTextPlane,TEACHER.ObjTextPlane.prototype.setText=function(e){let t=this;t.ctext.text=e,t.stage.update(),t.texture.needsUpdate=!0},TEACHER.ObjGraph=function(e,t,n,o,i,a,s){let r=this;r.objCon=new THREE.Object3D,r._xMin=e||0,r._xMax=t||10,r._yMin=n||0,r._yMax=o||10,r.divXN=5,r.divYN=4,r.frameMat=new THREE.LineBasicMaterial({color:i||16777215});for(var l=[],c=0;c<=r.divXN;c++)l.push(new THREE.Vector3(20*c-50,0,0)),l.push(new THREE.Vector3(20*c-50,50,0));for(var E=0;E<=r.divYN;E++)l.push(new THREE.Vector3(-50,12.5*E,0)),l.push(new THREE.Vector3(50,12.5*E,0));let h=(new THREE.BufferGeometry).setFromPoints(l);r.frame=new THREE.LineSegments(h,r.frameMat),r.objCon.add(r.frame),r.labelXMin=new TEACHER.ObjTextPlane(20,5,String(r._xMin),"z",i||16777215),r.labelXMin.position.x=-50,r.labelXMin.position.y=-3,r.objCon.add(r.labelXMin),r.labelXMax=new TEACHER.ObjTextPlane(20,5,String(r._xMax),"z",i||16777215),r.labelXMax.position.x=50,r.labelXMax.position.y=-3,r.objCon.add(r.labelXMax),r.labelYMin=new TEACHER.ObjTextPlane(20,5,String(r._yMin),"z",i||16777215),r.labelYMin.position.x=-53,r.labelYMin.position.y=0,r.objCon.add(r.labelYMin),r.labelYMax=new TEACHER.ObjTextPlane(20,5,String(r._yMax),"z",i||16777215),r.labelYMax.position.x=-53,r.labelYMax.position.y=50,r.objCon.add(r.labelYMax),r.labelX=new TEACHER.ObjTextPlane(24,7,"x","z",i||16777215),r.labelX.position.x=60,r.labelX.position.y=4,r.labelX.position.z=1,r.labelY=new TEACHER.ObjTextPlane(24,7,"y","z",i||16777215),r.labelY.position.x=-60,r.labelY.position.y=25,r.labelY.position.z=1,r.labelY.rotation.z=Math.PI/2,r.labelTitle=new TEACHER.ObjTextPlane(40,10,"y-x","z",i||16777215),r.labelTitle.position.y=53,r.labelTitle.position.z=1,r.objCon.add(r.labelX).add(r.labelY).add(r.labelTitle),r._lineColor=a,r._nnMax=s,r.line=new TEACHER.Line(r._lineColor||16776960,2,r._nnMax),r.objCon.add(r.line),r.changeScale(),THREE.Object3D.call(this),r.add(r.objCon)},TEACHER.ObjGraph.prototype=Object.create(THREE.Object3D.prototype),TEACHER.ObjGraph.prototype.constructor=TEACHER.ObjGraph,Object.defineProperty(TEACHER.ObjGraph.prototype,"xMin",{get:function(){return this._xMin},set:function(e){this._xMin=e,this.changeScale()}}),Object.defineProperty(TEACHER.ObjGraph.prototype,"xMax",{get:function(){return this._xMax},set:function(e){this._xMax=e,this.changeScale()}}),Object.defineProperty(TEACHER.ObjGraph.prototype,"yMin",{get:function(){return this._yMin},set:function(e){this._yMin=e,this.changeScale()}}),Object.defineProperty(TEACHER.ObjGraph.prototype,"yMax",{get:function(){return this._yMax},set:function(e){this._yMax=e,this.changeScale()}}),TEACHER.ObjGraph.prototype.addPoint=function(e,t){this.line.addPoint(e,t,0),this.line.update()},TEACHER.ObjGraph.prototype.clear=function(){this.line.clear()},TEACHER.ObjGraph.prototype.changeScale=function(){let e=this;e.line.scale.x=100/(e._xMax-e._xMin),e.line.scale.y=50/(e._yMax-e._yMin),e.line.position.x=-50-e._xMin*e.line.scale.x,e.line.position.y=-e._yMin*e.line.scale.y,e.labelXMin.setText(e._xMin),e.labelXMax.setText(e._xMax),e.labelYMin.setText(e._yMin),e.labelYMax.setText(e._yMax)},TEACHER.ObjGraph.prototype.setLabel=function(e,t,n){this.labelTitle.setText(e||"y-x"),this.labelY.setText(t||"y"),this.labelX.setText(n||"x")};var skyBox=new THREE.Object3D;skyBox.wallU=new TEACHER.ObjPicPlane(1e4,1e4,pics.wallU,"y",1),skyBox.wallD=new TEACHER.ObjPicPlane(1e4,1e4,pics.wallD,"y",0),skyBox.wallS=new TEACHER.ObjPicCylinder(5e3,1e4,pics.wallSide,!0,"y",1),skyBox.wallU.position.y=5e3,skyBox.wallD.position.y=-5e3,skyBox.add(skyBox.wallU).add(skyBox.wallD).add(skyBox.wallS),world3D.scene.add(skyBox);var ground=new TEACHER.ObjPicPlane(100,100,pics.ground,"y");world3D.scene.add(ground);var logo=new TEACHER.ObjPicPlane(100,12.5,pics.logo,"z",2);function getMouse3D(e,t){let n,o=e||"y",i=new THREE.Vector3;"x"===o?n=new THREE.Vector3(1,0,0):"y"===o?n=new THREE.Vector3(0,1,0):"z"===o?n=new THREE.Vector3(0,0,1):log("錯誤!!");let a=new THREE.Vector2;return a.x=world2D.stage.mouseX/1600*2-1,a.y=-world2D.stage.mouseY/900*2+1,world3D.raycaster.setFromCamera(a,world3D.camera),world3D.raycaster.ray.intersectPlane(new THREE.Plane(n),i),i}logo.position.z=-50,logo.position.y=6.25,world3D.scene.add(logo),init();