"use strict";var app,ballA,blurFilterAF,blurFilterAB,fps=60,log=console.log,gameMD=0,isPlay=!0,cnn=10,cloudsAF=[],cloudsAB=[],dt=.02,tt=0;function init(){app=new PIXI.Application({view:canvasPixi[0],width:1600,height:900,antialias:!0,transparent:!0,resolution:1});var l=new PIXI.Graphics;l.beginFill(52428),l.drawRect(0,0,1600,900),app.stage.addChild(l),ballA={vy:0,k:.1,yyF:0,yyB:0},(blurFilterAB=new PIXI.filters.BlurFilter).quality=5,blurFilterAB.blurY=0;for(var a=blurFilterAB.blurX=0;a<cnn;a++){let l=PIXI.Sprite.from(Math.random()<.4?"allData/pics/cloud02.png":"allData/pics/cloud01.png");l.active=!1,l.anchor.set(.5),l.x=800,l.y=1450,l.filters=[blurFilterAB],app.stage.addChild(l),cloudsAB.push(l)}(blurFilterAF=new PIXI.filters.BlurFilter).quality=5,blurFilterAF.blurY=0;for(a=blurFilterAF.blurX=0;a<cnn;a++){let l=PIXI.Sprite.from(Math.random()<.4?"allData/pics/cloud02.png":"allData/pics/cloud01.png");l.active=!1,l.anchor.set(.5),l.x=800,l.y=1450,l.filters=[blurFilterAF],app.stage.addChild(l),cloudsAF.push(l)}for(a=0;a<1e4;a++)ballA.vy=10,ballA.yyF+=ballA.vy*dt,ballA.yyB+=ballA.vy*dt,ballA.yyF>300+30*Math.random()&&(ballA.yyF=0,addCloud("A","F")),ballA.yyB>300+30*Math.random()&&(ballA.yyB=0,addCloud("A","B")),cloudMove();ballA.vy=0,world2D.helicopter.stop(),world2D.p2.stop(),world2D.p2.unbrella.stop(),world2D.helicopter.tt=0,world2D.chart.data=[[0,0]],world2D.btnJump.on("click",clickBtn),world2D.btnReset.on("click",clickBtn),world2D.btnDrop.on("click",clickBtn),world2D.btnOpen.on("click",clickBtn),world2D.btnPlayStop.on("click",clickBtn),clickBtn(),stats.begin(),setInterval(tick,1e3/fps)}function tick(){stats.end(),stats.begin(),0===gameMD?(ballA.vy=0,blurFilterAF.blurY=0,blurFilterAF.blurX=0,blurFilterAB.blurY=0,blurFilterAB.blurX=0,world2D.p2.unbrella.visible=!0,world2D.p2.unbrella.gotoAndStop(0),world2D.p2.gotoAndStop(0),world2D.helicopter.visible=!0,world2D.helicopter.alpha=1,world2D.helicopter.tt++,world2D.helicopter.gotoAndStop(1<world2D.helicopter.tt%4?0:1)):(ballA.k=1===gameMD?.02:.1,ballA.vy+=(10-ballA.k*ballA.vy)*(isPlay?1:0),ballA.yyF+=ballA.vy*(isPlay?dt:0),ballA.yyB+=ballA.vy*(isPlay?dt:0),blurFilterAF.blurY=ballA.vy/10,blurFilterAF.blurX=0,blurFilterAB.blurY=ballA.vy/15,blurFilterAB.blurX=0,ballA.yyF>60+6*Math.random()&&(ballA.yyF=0,addCloud("A","F")),ballA.yyB>60+60*Math.random()&&(ballA.yyB=0,addCloud("A","B")),cloudMove(),world2D.helicopter.alpha-=.05,world2D.helicopter.alpha<0&&(world2D.helicopter.visible=!1),world2D.p2.unbrella.gotoAndStop(1),world2D.p2.unbrella.visible=2===gameMD,world2D.p2.gotoAndStop(1===gameMD?1:0));var l=world2D.chArrow.checked;if(world2D.p2.arV.scaleY=ballA.vy/400,world2D.p2.labelV.y=ballA.vy/20,world2D.p2.labelV.visible=world2D.p2.arV.visible=l&&0<ballA.vy,world2D.p2.arD.visible=world2D.p2.labelMG.visible=l,world2D.p2.arU.scaleY=0===gameMD?1:ballA.k*ballA.vy/10,world2D.p2.arU.visible=l,world2D.p2.labelTT.visible=l&&0===gameMD,world2D.p2.labelKV.visible=l&&0!=gameMD,world2D.p2.labelKV.gotoAndStop(1===gameMD?0:1),0===gameMD)tt=0;else if(isPlay){tt+=dt,750<world2D.chart.data.length&&world2D.chart.data.shift(),world2D.chart.data.push([40*tt,-.7*ballA.vy]);var a=world2D.chart.data.length;world2D.chart.emp.shape.graphics.clear(),world2D.chart.emp.shape.graphics.setStrokeStyle(3),world2D.chart.emp.shape.graphics.beginStroke("#000000"),world2D.chart.emp.shape.graphics.moveTo(0,world2D.chart.data[0][1]);for(var r=1;r<a;r++)world2D.chart.emp.shape.graphics.lineTo(world2D.chart.data[r][0]-world2D.chart.data[0][0],world2D.chart.data[r][1])}l=750*dt<tt?tt%(750*dt/4)*40:0;world2D.chart.ll1.x=150-l,world2D.chart.ll2.x=300-l,world2D.chart.ll3.x=450-l,world2D.chart.ll4.x=600-l,world2D.stage.update()}function clickBtn(l){l=l?l.target.name:"xx";"btnJump"===l?(gameMD=1,world2D.chart.data=[[0,0]],isPlay=!0):"btnOpen"===l?gameMD=2:"btnDrop"===l?gameMD=1:"btnReset"===l?isPlay=!(gameMD=0):"btnPlayStop"===l&&(isPlay=!isPlay),world2D.btnDrop.visible=2===gameMD,world2D.btnJump.visible=0===gameMD,world2D.btnOpen.visible=1===gameMD,world2D.btnReset.visible=0!=gameMD,world2D.btnPlayStop.visible=0!=gameMD}function addCloud(l,a){let r;"A"===l&&"F"===a?r=cloudsAF:"A"===l&&"B"===a&&(r=cloudsAB);for(var t=0;t<cnn;t++){let l=r[t];l.active||(t=cnn+1,l.y=1e3+200*Math.random(),l.x=200+1200*Math.random(),l.scale.x=l.scale.y=(.6+.6*Math.random())*("B"===a?.5:1),l.active=!0)}}function cloudMove(){for(var l=0;l<cnn;l++){var a=cloudsAF[l],r=cloudsAB[l];a.active&&(a.y-=ballA.vy*dt*5*(isPlay?1:0),a.y<-150&&(a.active=!1)),r.active&&(r.y-=ballA.vy*dt*2.5*(isPlay?1:0),r.y<-150&&(r.active=!1))}}MyJS.myResize(),init();