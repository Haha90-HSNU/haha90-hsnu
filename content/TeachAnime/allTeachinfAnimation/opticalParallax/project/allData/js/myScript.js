MyTextureMaskShader={uniforms:{textureBottom:{type:"t",value:null},textureMasked:{type:"t",value:null},textureMask:{type:"t",value:null},textureTop:{type:"t",value:null}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D textureBottom;","uniform sampler2D textureMasked;","uniform sampler2D textureMask;","uniform sampler2D textureTop;","varying vec2 vUv;","void main() {","vec4 texelMasked = texture2D( textureMasked, vUv );","vec4 texelMask = texture2D( textureMask, vUv );","vec4 texelBottom = texture2D( textureBottom, vUv );","vec4 texelTop = texture2D( textureTop, vUv );","vec4 background = vec4(0.667, 0.667, 0.667, 1.0);","vec4 bottomAndBakground = mix(background , texelBottom , texelBottom.a);","vec4 temp = mix( bottomAndBakground, texelMasked, texelMask.r );","gl_FragColor = mix( temp, texelTop, texelTop.a );","}"].join("\n")},MyEyeBallShader={vertexShader:["varying vec3 vNormal;","void main() {","vNormal = normal;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D texture;","varying vec3 vNormal;","void main() {","vec2 uv = normalize( vNormal ).xy * 0.5 + 0.5;","vec3 color = texture2D( texture, uv ).rgb;","if ( vNormal.z < - 0.85 ) color = vec3( 0.777, 0.74, 0.74 ); // back of eye","gl_FragColor = vec4( color, 1.0 );","}"].join("\n")};var MyJS=MyJS||{};!function(){var y;function e(e){THREE.Object3D.call(this),y=e}e.prototype=new THREE.Object3D,(MyJS.AllPlayers=e).prototype.setMeshs=function(e){var a,t,r=this,o=.8*y.gvs.lenFF;"top"===e||"bottom"===e?(r.obj=r.generateOneCrossMesh(),r.obj.position.z=o,r.add(r.obj),"top"===e&&(r.lenOutline=r.generateLenOutline(),r.add(r.lenOutline),a=new THREE.CylinderGeometry(0,y.gvs.lenRR+10,.01,32,1,!0),t=new THREE.MeshBasicMaterial({color:16776960}),r.lenBack=new THREE.Mesh(a,t),r.lenBack.rotation.x=-Math.PI/2,r.lenBack.position.z=-.5*y.gvs.lenDD,r.add(r.lenBack)),r.imgWireframe=r.generateOneCrossWireframe(),r.imgWireframe.position.z=-o,r.add(r.imgWireframe),r.pointer=r.generatePointer(),r.pointer.position.x=0,r.pointer.position.y=0,r.pointer.position.z=2*o,r.add(r.pointer),r.groundZP=r.generateWireframePlane(400,1e3,4,10,39321,2,1),r.groundZN=r.generateWireframePlane(400,1e3,4,10,39321,2,-1),r.add(r.groundZP),r.add(r.groundZN)):"image"===e?(r.img=r.generateOneCrossMesh(),r.img.position.z=-o,r.add(r.img),r.pointer=r.generatePointer(),r.pointer.position.x=0,r.pointer.position.y=0,r.pointer.position.z=2*o,r.add(r.pointer),r.groundZP=r.generateWireframePlane(400,1e3,4,10,39321,2,1),r.groundZN=r.generateWireframePlane(400,1e3,4,10,39321,2,-1),r.add(r.groundZP),r.add(r.groundZN)):"len"===e&&(r.len=r.generateLen(),r.add(r.len))},e.prototype.generateOneCrossMesh=function(){var e=new THREE.Object3D,a=50,t=300,r=16777215,o=new THREE.CylinderGeometry(a,56,.01,32,1,!0),n=new THREE.MeshBasicMaterial({color:r}),i=new THREE.Mesh(o,n);i.rotation.x=90*Math.PI/180,i.position.z=2,e.add(i),(i=new THREE.Mesh(o,n)).rotation.x=-90*Math.PI/180,i.position.z=-2,e.add(i);o=new THREE.CylinderGeometry(56,56,4,32,1,!0);(i=new THREE.Mesh(o,n)).rotation.x=90*Math.PI/180,e.add(i);o=new THREE.CylinderGeometry(a,a,4,32,1,!0);(n=new THREE.MeshBasicMaterial({color:r})).side=THREE.BackSide,(i=new THREE.Mesh(o,n)).rotation.x=90*Math.PI/180,e.add(i);n=new THREE.BoxGeometry(t,6,4),i=new THREE.MeshBasicMaterial({color:r}),r=new THREE.Mesh(n,i);e.add(r),n=new THREE.BoxGeometry(6,t,4),r=new THREE.Mesh(n,i),e.add(r);n=new THREE.CylinderGeometry(.01,16,40),r=new THREE.Mesh(n,i);return r.scale.z=.5,r.position.x=-158,r.rotation.z=90*Math.PI/180,e.add(r),(r=new THREE.Mesh(n,i)).scale.z=.5,r.position.y=158,e.add(r),e},e.prototype.generateOneCrossWireframe=function(){var e=new THREE.Object3D,a=16711935,t=new THREE.CylinderGeometry(50,56,.01,16,1,!0),r=new THREE.MeshBasicMaterial({color:a}),o=new THREE.Mesh(t,r);o.rotation.x=90*Math.PI/180,o.position.z=.5,e.add(o),(o=new THREE.Mesh(t,r)).rotation.x=-90*Math.PI/180,o.position.z=-.5,e.add(o);r=new THREE.BoxGeometry(300,6,1),o=new THREE.MeshBasicMaterial({color:a}),a=new THREE.Mesh(r,o);return e.add(a),r=new THREE.BoxGeometry(6,300,1),a=new THREE.Mesh(r,o),e.add(a),e},e.prototype.generateLen=function(){var e=new THREE.Object3D,a=y.gvs.lenRR,t=y.gvs.lenDD,a=new THREE.CylinderGeometry(a,a,t,64,1),t=new THREE.MeshBasicMaterial({color:16711935}),t=new THREE.Mesh(a,t);return t.rotation.x=90*Math.PI/180,e.add(t),e},e.prototype.generateLenOutline=function(){var e=new THREE.Object3D,a=y.gvs.lenRR,t=10,r=new THREE.CylinderGeometry(a,a+t,.01,64,1,!0),o=new THREE.MeshBasicMaterial({color:16776960}),n=new THREE.Mesh(r,o);n.rotation.x=90*Math.PI/180,n.position.z=5,e.add(n),(n=new THREE.Mesh(r,o)).rotation.x=-90*Math.PI/180,n.position.z=-5,e.add(n);r=new THREE.CylinderGeometry(a+t,a+t,t,64,1,!0);return(n=new THREE.Mesh(r,o)).rotation.x=90*Math.PI/180,e.add(n),e},e.prototype.generatePointer=function(){var e=new THREE.Object3D,a=y.gvs.lenRR,t=new THREE.CylinderGeometry(4,4,2*a+30,16,1),r=new THREE.MeshBasicMaterial({color:65280}),t=new THREE.Mesh(t,r);t.position.y=15,e.add(t);r=new THREE.SphereGeometry(12,16,8),t=new THREE.MeshBasicMaterial({color:16750848}),t=new THREE.Mesh(r,t);return t.position.y=a+30+6,e.add(t),e},e.prototype.generateWireframePlane=function(e,a,t,r,o,n,i){var s=new THREE.Object3D,l=new THREE.BoxGeometry(100,100,100),m=new THREE.MeshBasicMaterial({color:o||10066329}),c=n||5,d=-y.gvs.lenRR-10;s.boxArray=[];for(var p=0;p<t;p++)for(var g=0;g<=r;g++){(E=new THREE.Mesh(l,m)).RX=new THREE.Object3D,E.p1=new THREE.Vector3((0+p)*e/t-.5*e,d,i*g*a/r),E.p2=new THREE.Vector3((1+p)*e/t-.5*e,d,i*g*a/r);var h=E.p1.distanceTo(E.p2),u=Math.atan2(E.p1.z-E.p2.z,E.p1.x-E.p2.x);E.scale.x=h/100,E.scale.y=c/100,E.scale.z=c/100,E.RX.position.x=.5*(E.p1.x+E.p2.x),E.RX.position.y=.5*(E.p1.y+E.p2.y),E.RX.position.z=.5*(E.p1.z+E.p2.z),E.rotation.y=u,E.RX.add(E),s.add(E.RX),s.boxArray.push(E)}for(p=0;p<=t;p++)for(var E,g=0;g<r;g++){(E=new THREE.Mesh(l,m)).RX=new THREE.Object3D,E.p1=new THREE.Vector3(p*e/t-.5*e,d,i*(0+g)*a/r),E.p2=new THREE.Vector3(p*e/t-.5*e,d,i*(1+g)*a/r);h=E.p1.distanceTo(E.p2),u=Math.atan2(E.p1.z-E.p2.z,E.p1.x-E.p2.x);E.scale.x=h/100,E.scale.y=c/100,E.scale.z=c/100,E.RX.position.x=.5*(E.p1.x+E.p2.x),E.RX.position.y=.5*(E.p1.y+E.p2.y),E.RX.position.z=.5*(E.p1.z+E.p2.z),E.rotation.y=u,E.RX.add(E),s.add(E.RX),s.boxArray.push(E)}return s},e.prototype.updateGround=function(e){for(var a=this["groundZ"+e],t=a.boxArray.length,r=0;r<t;r++){for(var o,n,i,s=a.boxArray[r],l=1;l<=2;l++){var m=s["p"+l],c=Math.abs(m.z);0===c&&(c="N"===e?.01:-.01,c*="mirror"===y.lenMD?-1:1),Math.abs(c)===y.ff&&(d=s["p"+(1===l?2:1)],c=.999*c+.001*Math.abs(d.z));var d=(p="i"===y.fMD?-c:1/(1/y.ff-1/c))/c,c=-d*m.x,d=-d*m.y,p=p;("len"===y.lenMD&&0<m.z||"mirror"===y.lenMD&&m.z<0)&&(p*=-1);p=new THREE.Vector3(c,d,p);s["q"+l]=p}0<=s.q1.z*s.q2.z?(s.visible=!0,o=s.q1.distanceTo(s.q2),n=Math.acos((s.q1.x-s.q2.x)/o),i=Math.atan2(s.q1.y-s.q2.y,s.q1.z-s.q2.z),s.scale.x=o/100,s.RX.position.x=.5*(s.q1.x+s.q2.x),s.RX.position.y=.5*(s.q1.y+s.q2.y),s.RX.position.z=.5*(s.q1.z+s.q2.z),s.rotation.y=-n,s.RX.rotation.x=-i):s.visible=!1}}}();MyJS=MyJS||{};function log(e){console.log(e)}!function(){var o,r;function e(){(o=this).gvs={lenRR:150,lenDD:10,lenFF:200},o.isDirty=!0,o.preventCameraDrag=!0,o.lenMD="len",o.fMD="p",o.pp=2.5*o.gvs.lenFF;o.stageWidth=1600,o.stageHeight=900,o.bgColor=0,o.camera=new THREE.PerspectiveCamera(75,o.stageWidth/o.stageHeight,.1,1e4),o.renderer=new THREE.WebGLRenderer({antialias:!0}),o.renderer.setSize(o.stageWidth,o.stageHeight),$("#mainAnimation").append(o.renderer.domElement),$(o.renderer.domElement).attr("id","canvas3D"),$("#mainAnimation").mousedown(l),$("#mainAnimation").mousemove(m),$("#mainAnimation").mouseup(c),$("#mainAnimation").on("touchstart",l),$("#mainAnimation").on("touchmove",m),$("#mainAnimation").on("touchend",c),o.renderTargetImage=new THREE.WebGLRenderTarget(o.stageWidth,o.stageHeight,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter}),o.renderTargetLen=new THREE.WebGLRenderTarget(o.stageWidth,o.stageHeight,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter}),o.renderTargetTop=new THREE.WebGLRenderTarget(o.stageWidth,o.stageHeight,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter}),o.renderTargetBottom=new THREE.WebGLRenderTarget(o.stageWidth,o.stageHeight,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter}),o.sceneTop=new THREE.Scene,o.sceneBottom=new THREE.Scene,o.sceneBottom.background=new THREE.Color(o.bgColor),o.sceneImage=new THREE.Scene,o.sceneImage.background=new THREE.Color(o.bgColor),o.sceneLen=new THREE.Scene,o.cameraRR=250,o.cameraTheta=80*Math.PI/180,o.cameraPhi=20*Math.PI/180,o.cameraX0=0,o.cameraY0=0,o.cameraZ0=0,o.camera.isDraging=!1,o.composer=new THREE.EffectComposer(o.renderer),o.maskPass=new THREE.ShaderPass(MyTextureMaskShader),o.copyPass=new THREE.ShaderPass(THREE.CopyShader),o.effectFXAA=new THREE.ShaderPass(THREE.FXAAShader),o.maskPass.uniforms.textureBottom.value=o.renderTargetBottom,o.maskPass.uniforms.textureTop.value=o.renderTargetTop,o.maskPass.uniforms.textureMask.value=o.renderTargetLen,o.maskPass.uniforms.textureMasked.value=o.renderTargetImage,o.effectFXAA.uniforms.resolution.value.set(1/o.stageWidth,1/o.stageHeight),o.composer.addPass(o.maskPass),o.composer.addPass(o.copyPass),o.composer.addPass(o.effectFXAA),o.effectFXAA.renderToScreen=!0,o.raycaster=new THREE.Raycaster,o.stats=new Stats,o.allPlayersTop=new MyJS.AllPlayers(o),o.allPlayersTop.setMeshs("top"),o.sceneTop.add(o.allPlayersTop),o.allPlayersImage=new MyJS.AllPlayers(o),o.allPlayersImage.setMeshs("image"),o.sceneImage.add(o.allPlayersImage),o.allPlayersBottom=new MyJS.AllPlayers(o),o.allPlayersBottom.setMeshs("bottom"),o.sceneBottom.add(o.allPlayersBottom),o.allPlayersLen=new MyJS.AllPlayers(o),o.allPlayersLen.setMeshs("len"),o.sceneLen.add(o.allPlayersLen)}function a(){o.lenMD=r.controlLen.rbLen.selected?"len":"mirror",o.fMD=r.controlLen.rbFp.selected?"p":r.controlLen.rbFn.selected?"n":"i","len"===o.lenMD?"i"===o.fMD?r.controlLen.lenLabel.gotoAndStop(0):"p"===o.fMD?r.controlLen.lenLabel.gotoAndStop(2):"n"===o.fMD&&r.controlLen.lenLabel.gotoAndStop(3):"mirror"===o.lenMD&&("i"===o.fMD?r.controlLen.lenLabel.gotoAndStop(1):"p"===o.fMD?r.controlLen.lenLabel.gotoAndStop(5):"n"===o.fMD&&r.controlLen.lenLabel.gotoAndStop(4)),o.pp=Math.abs(r.theControlPQ.theObj.x)/100*o.gvs.lenFF,o.ppPointer=Math.abs(r.theControlPQ.thePointer.x)/100*o.gvs.lenFF,"i"===o.fMD?(o.qq=-o.pp,o.qqPointer=-o.ppPointer):(o.ff=("n"===o.fMD?-1:1)*o.gvs.lenFF,o.qq=1/(1/o.ff-1/o.pp),o.qqPointer=1/(1/o.ff-1/o.ppPointer)),o.allPlayersTop.obj.position.z=o.pp,o.allPlayersBottom.obj.position.z=o.pp,o.allPlayersImage.img.scale.x=o.allPlayersImage.img.scale.y=-o.qq/o.pp,o.allPlayersImage.img.position.z=o.qq,"len"===o.lenMD&&(o.allPlayersImage.img.position.z*=-1),r.theControlPQ.theImg.x=-o.allPlayersImage.img.position.z/o.gvs.lenFF*100,o.allPlayersTop.imgWireframe.position.z=o.allPlayersImage.img.position.z,o.allPlayersTop.imgWireframe.scale.x=o.allPlayersTop.imgWireframe.scale.y=-o.qq/o.pp,o.allPlayersBottom.imgWireframe.position.z=o.allPlayersImage.img.position.z,o.allPlayersBottom.imgWireframe.scale.x=o.allPlayersBottom.imgWireframe.scale.y=-o.qq/o.pp,o.allPlayersTop.pointer.position.z=o.ppPointer*(r.theControlPQ.thePointer.x<0?1:-1),o.allPlayersBottom.pointer.position.z=o.ppPointer*(r.theControlPQ.thePointer.x<0?1:-1),o.allPlayersImage.pointer.scale.x=o.allPlayersImage.pointer.scale.y=-o.qqPointer/o.ppPointer,o.allPlayersImage.pointer.position.z=o.qqPointer*(r.theControlPQ.thePointer.x<0?1:-1),"len"===o.lenMD&&(o.allPlayersImage.pointer.position.z*=-1),o.allPlayersImage.updateGround("P"),o.allPlayersImage.updateGround("N"),r.controlView.rbLight.visible=r.controlView.rbView.visible=r.controlView.rbGod.selected,r.controlView.mcObj.visible=r.controlView.rbDiagram.visible=r.controlView.rbEdge.visible=r.controlView.chDash.visible=r.controlView.rbLight.visible&&r.controlView.rbLight.selected,r.controlView.chBend.visible=r.controlView.rbView.visible&&r.controlView.rbView.selected,o.cameraRR=800,o.cameraX0=0,o.cameraZ0=0,o.cameraY0=0,o.camera.position.x=o.cameraRR*Math.sin(o.cameraTheta)*Math.sin(o.cameraPhi)+o.cameraX0,o.camera.position.z=o.cameraRR*Math.sin(o.cameraTheta)*Math.cos(o.cameraPhi)+o.cameraZ0,o.camera.position.y=o.cameraRR*Math.cos(o.cameraTheta)+o.cameraY0,o.camera.lookAt(new THREE.Vector3(o.cameraX0,o.cameraY0,o.cameraZ0));var e=r.chZoomIn.selected?30:75;o.camera.fov=.95*o.camera.fov+.05*e,o.camera.updateProjectionMatrix(),o.isObjCameraSameSide=0<o.camera.position.z*o.pp,o.isImgCameraSameSide=0<o.camera.position.z*o.allPlayersImage.img.position.z,o.isPointerCameraSameSide=0<o.camera.position.z*o.allPlayersTop.pointer.position.z,o.isPointerImgCameraSameSide=0<o.camera.position.z*o.allPlayersImage.pointer.position.z,o.allPlayersTop.lenBack.visible="mirror"===o.lenMD,o.allPlayersTop.obj.visible=o.isObjCameraSameSide,o.allPlayersBottom.obj.visible=!o.isObjCameraSameSide,"len"===o.lenMD?o.allPlayersImage.img.visible=!o.isObjCameraSameSide:"mirror"===o.lenMD&&(o.allPlayersImage.img.visible=o.isObjCameraSameSide);var a=r.chImage.selected;"len"===o.lenMD?(o.allPlayersTop.imgWireframe.visible=o.qq<0&&o.isObjCameraSameSide&&a,o.allPlayersBottom.imgWireframe.visible=!(o.qq<0&&o.isObjCameraSameSide)&&a):"mirror"===o.lenMD&&(o.allPlayersTop.imgWireframe.visible=o.qq<0&&!o.isObjCameraSameSide&&a,o.allPlayersBottom.imgWireframe.visible=!(o.qq<0&&!o.isObjCameraSameSide)&&a),r.theControlPQ.theImg.visible=a,o.allPlayersTop.pointer.visible=o.isPointerCameraSameSide,o.allPlayersBottom.pointer.visible=!o.isPointerCameraSameSide,"len"===o.lenMD?o.allPlayersImage.pointer.visible=!o.isPointerCameraSameSide:"mirror"===o.lenMD&&(o.allPlayersImage.pointer.visible=o.isPointerCameraSameSide),o.allPlayersTop.groundZP.visible=0<o.camera.position.z,o.allPlayersTop.groundZN.visible=o.camera.position.z<0,o.allPlayersBottom.groundZP.visible=o.camera.position.z<0,o.allPlayersBottom.groundZN.visible=0<o.camera.position.z,"len"===o.lenMD?(o.allPlayersImage.groundZP.visible=o.camera.position.z<0,o.allPlayersImage.groundZN.visible=0<o.camera.position.z):"mirror"===o.lenMD&&(o.allPlayersImage.groundZP.visible=0<o.camera.position.z,o.allPlayersImage.groundZN.visible=!1),o.isDirty=o.isDirty||o.camera.isDraging||.01<Math.abs(o.camera.fov-e),o.isDirty&&(o.renderer.render(o.sceneBottom,o.camera,o.renderTargetBottom),o.renderer.render(o.sceneTop,o.camera,o.renderTargetTop),o.renderer.render(o.sceneImage,o.camera,o.renderTargetImage),o.renderer.render(o.sceneLen,o.camera,o.renderTargetLen),o.composer.render(),o.isDirty=!1,log("render")),stage2D.update(),o.stats.update()}function t(e,a,t){e.selected=e.checker.visible=t,(e.gp=a).push(e),e.on("click",n)}function n(e){var a=e.target.parent;if(!a.selected){for(var t=a.gp.length,r=0;r<t;r++)a.gp[r].selected=a.gp[r].checker.visible=!1;a.selected=a.checker.visible=!0}o.isDirty=!0}function i(e,a){e.selected=e.checker.visible=a,e.on("click",s)}function s(e){e=e.target.parent;e.selected=!e.selected,e.checker.visible=e.selected,o.isDirty=!0}function l(e){log("down!!");var a=0,t=0;"mousedown"===e.type?(a=e.pageX,t=e.pageY):"touchstart"===e.type&&(a=e.originalEvent.touches[0].pageX,t=e.originalEvent.touches[0].pageY,lastTouch=e),d?d=!1:(a-=(e=$("#mainAnimation").offset()).left,t-=e.top,a=a,t=t,o.camera.isDraging=!0,o.camera.oldMouseX=a,o.camera.oldMouseY=t)}function m(e){var a=0,t=0;"mousemove"===e.type?(a=e.pageX,t=e.pageY):"touchmove"===e.type&&(a=e.originalEvent.touches[0].pageX,t=e.originalEvent.touches[0].pageY,lastTouch=e);e=$("#mainAnimation").offset();(function(e,a){if(o.camera.isDraging){e=e,a=a;for(o.cameraPhi-=.01*(e-o.camera.oldMouseX);o.cameraPhi>Math.PI;)o.cameraPhi-=2*Math.PI;for(;o.cameraPhi<-Math.PI;)o.cameraPhi+=2*Math.PI;o.cameraTheta-=.01*(a-o.camera.oldMouseY),o.cameraTheta>.99*Math.PI&&(o.cameraTheta=.99*Math.PI),o.cameraTheta<.01*Math.PI&&(o.cameraTheta=.01*Math.PI),o.camera.oldMouseX=e,o.camera.oldMouseY=a}})(a-=e.left,t-=e.top),"obj"===o.drag2D?(r.theControlPQ.theObj.x=stage2D.mouseX-r.theControlPQ.x,r.theControlPQ.theObj.x<-450?r.theControlPQ.theObj.x=-450:-10<r.theControlPQ.theObj.x&&(r.theControlPQ.theObj.x=-10),o.isDirty=!0):"point"===o.drag2D&&(r.theControlPQ.thePointer.x=stage2D.mouseX-r.theControlPQ.x,r.theControlPQ.thePointer.x<-450?r.theControlPQ.thePointer.x=-450:450<r.theControlPQ.thePointer.x&&(r.theControlPQ.thePointer.x=450),o.isDirty=!0)}function c(e){"mouseup"===e.type?(e.pageX,e.pageY):"touchend"===e.type&&(lastTouch.originalEvent.touches[0].pageX,lastTouch.originalEvent.touches[0].pageY);e=$("#mainAnimation").offset();e.left,e.top,o.camera.isDraging=!1,o.drag2D=""}function d(){o.preventCameraDrag=!0,log("preventCameraDra!!!!!")}(MyJS.TheWorld=e).prototype.initMyAnimate=function(){(r=myAnimate).rbGLenMD=[],t(r.controlLen.rbLen,r.rbGLenMD,!0),t(r.controlLen.rbMirror,r.rbGLenMD),r.rbGFF=[],t(r.controlLen.rbFp,r.rbGFF,!0),t(r.controlLen.rbFn,r.rbGFF),t(r.controlLen.rbFi,r.rbGFF),r.rbGLightView=[],t(r.controlView.rbLight,r.rbGLightView,!0),t(r.controlView.rbView,r.rbGLightView),r.rbGDiagramEdge=[],t(r.controlView.rbDiagram,r.rbGDiagramEdge,!0),t(r.controlView.rbEdge,r.rbGDiagramEdge),r.rbGmcObj=[],t(r.controlView.mcObj.rbR,r.rbGmcObj),t(r.controlView.mcObj.rbL,r.rbGmcObj),t(r.controlView.mcObj.rbU,r.rbGmcObj,!0),t(r.controlView.mcObj.rbD,r.rbGmcObj),t(r.controlView.mcObj.rbC,r.rbGmcObj),i(r.controlView.chDash,!0),i(r.controlView.chBend,!0),i(r.chImage,!1),i(r.chZoomIn,!1),r.theControlPQ.theObj.on("mousedown",function(){o.drag2D="obj",d=!0}),r.theControlPQ.thePointer.on("mousedown",function(){o.drag2D="point",d=!0}),r.chZoomIn.x+=1,setInterval(a,1e3/fps)},e.prototype.changeResolution=function(e){resolutionScale=e||1;e=this;e.stageWidth=1600*resolutionScale,e.stageHeight=900*resolutionScale,e.renderTargetImage.setSize(e.stageWidth,e.stageHeight),e.renderTargetLen.setSize(e.stageWidth,e.stageHeight),e.renderTargetTop.setSize(e.stageWidth,e.stageHeight),e.renderTargetBottom.setSize(e.stageWidth,e.stageHeight),e.renderer.setSize(e.stageWidth,e.stageHeight),e.camera.updateProjectionMatrix(),e.composer=new THREE.EffectComposer(e.renderer),e.maskPass=new THREE.ShaderPass(MyTextureMaskShader),e.copyPass=new THREE.ShaderPass(THREE.CopyShader),e.effectFXAA=new THREE.ShaderPass(THREE.FXAAShader),e.maskPass.uniforms.textureBottom.value=e.renderTargetBottom,e.maskPass.uniforms.textureTop.value=e.renderTargetTop,e.maskPass.uniforms.textureMask.value=e.renderTargetLen,e.maskPass.uniforms.textureMasked.value=e.renderTargetImage,e.effectFXAA.uniforms.resolution.value.set(1/e.stageWidth,1/e.stageHeight),e.composer.addPass(e.maskPass),e.composer.addPass(e.copyPass),e.composer.addPass(e.effectFXAA),e.effectFXAA.renderToScreen=!0,MyJS.myResize()}}(),$("#mainAnimation").css("position","absolute").css("top","0px").css("left","0px").css("width","1600px").css("height","900px");MyJS=MyJS||{};!function(){var r={};function e(){var e=window.innerWidth,a=window.innerHeight,t=Math.min(e/1600,a/900);$("#mainAnimation").css("width",1600*t).css("height",900*t);var r=0,o=0;e/1600<a/900?r=.5*(a-900*t):o=.5*(e-1600*t),$("#mainAnimation").offset({top:r,left:o});for(var n=$("#mainAnimation").children(),i=n.length,s=0;s<i;s++){var l=n[s],m=t;"canvas"===$(l).attr("id")&&(m/=resolutionScale),$(l).css({"-webkit-transform":"scale("+m+")","-moz-transform":"scale("+m+")","-ms-transform":"scale("+m+")","-o-transform":"scale("+m+")",transform:"scale("+m+");"}).offset({top:r,left:o})}}!function(){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(r.isMobile=!0),r.isOpera=!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),r.isFirefox="undefined"!=typeof InstallTrigger,r.isSafari=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString(),r.isIE=!!document.documentMode,r.isEdge=!r.isIE&&!!window.StyleMedia,r.isChrome=!!window.chrome&&!!window.chrome.webstore,r.isBlink=(r.isChrome||r.isOpera)&&!!window.CSS;var e=window.navigator.userAgent,a=window.navigator.platform;-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(a)?r.isMacOS=!0:-1!==["iPhone","iPad","iPod"].indexOf(a)?r.isIOS=!0:-1!==["Win32","Win64","Windows","WinCE"].indexOf(a)?r.isWondows=!0:/Android/.test(e)?r.isAndroid=!0:!os&&/Linux/.test(a)&&(r.isLinux=!0)}(),(MyJS.myResize=e)(),$("#mainAnimation").on("dragstart",function(e){e.preventDefault()}).css("margin","0px auto").css("overflow","hidden"),$(window).resize(e),$("body").prop("scroll","no").css("overflow","hidden"),MyJS.myFullScreen=function(){t=theWorld;var e=$("#mainAnimation").get(0);t.isFullscreened?(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),t.isFullscreened=!1):(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),t.isFullscreened=!0)}}();var myAnimate,stage2D,fps=30,theWorld=new MyJS.TheWorld;!function(){var e=AdobeAn.getComposition("98EA1A955B63F6489D0F00F6BFD1C4DE").getLibrary();myAnimate=new e.myAnimate,e=$("<canvas>").attr("width","1600px").attr("height","900px"),$("#mainAnimation").append(e),(stage2D=new createjs.Stage(e[0])).enableMouseOver(1e3/fps),stage2D.addChild(myAnimate),createjs.Touch.enable(stage2D),stage2D.update(),theWorld.initMyAnimate()}(),MyJS.myResize();