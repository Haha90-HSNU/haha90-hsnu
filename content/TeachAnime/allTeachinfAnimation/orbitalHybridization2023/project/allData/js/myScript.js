'use strict';var world01,world02,world03,fps=60,log=console.log,courseMD=1,tt=0,dt=.1,isPlay=!0,menuTime=100;function init(){ground.visible=!1,logo.visible=!1,world2D.slCameraRR.value=140,world01=new World01,scene.add(world01),world02=new World02,scene.add(world02),world03=new World03,scene.add(world03),world2D.slShapeAB.value=100,world2D.slShapeCC.value=80,world2D.btnPlayStop.on("click",function(){isPlay=!isPlay}),world2D.mBtn1.on("click",clickMBtn),world2D.mBtn2.on("click",clickMBtn),world2D.mBtn3.on("click",clickMBtn),world01.visible=world2D.control01.visible=1===courseMD,world02.visible=world2D.control02.visible=2===courseMD,world03.visible=world2D.control03.visible=3===courseMD,setInterval(tick,1e3/fps)}function tick(){100>menuTime&&0<menuTime&&menuTime--,world2D.t01.x=(200*menuTime+20*(100-menuTime))/100,world2D.t01.y=(130*menuTime+20*(100-menuTime))/100,world2D.t02.x=(818*menuTime+20*(100-menuTime))/100,world2D.t02.y=(130*menuTime+90*(100-menuTime))/100,world2D.t01.scaleX=world2D.t01.scaleY=world2D.t02.scaleX=world2D.t02.scaleY=(1*menuTime+.4*(100-menuTime))/100,world2D.mBtn1.x=(350*menuTime+420*(100-menuTime))/100,world2D.mBtn2.x=(800*menuTime+720*(100-menuTime))/100,world2D.mBtn3.x=(1250*menuTime+1020*(100-menuTime))/100,world2D.mBtn1.y=world2D.mBtn2.y=world2D.mBtn3.y=(500*menuTime+50*(100-menuTime))/100,world2D.mPointer.scaleX=world2D.mBtn1.scaleX=world2D.mBtn1.scaleY=world2D.mBtn2.scaleX=world2D.mBtn2.scaleY=world2D.mBtn3.scaleX=world2D.mBtn3.scaleY=(1*menuTime+.6*(100-menuTime))/100,world2D.mPointer.x=.9*world2D.mPointer.x+.1*world2D["mBtn"+courseMD].x,world2D.mPointer.y=world2D["mBtn"+courseMD].y+(60*menuTime+35*(100-menuTime))/100,world2D.tBG.alpha=(1*menuTime+0*(100-menuTime))/100,tt+=isPlay?dt:0,1===courseMD?world01.update():2===courseMD?world02.update():3===courseMD&&world03.update();var o=20*world2D.slCameraRR.value/140;world3D.cameraTarget.y=0,world3D.cameraTarget.x=o*Math.cos(-world3D.cameraPhi),world3D.cameraTarget.z=o*Math.sin(-world3D.cameraPhi),world3D.render(),world2D.stage.update()}MyJS.myResize();function clickMBtn(o){var t=o.target.name;courseMD=parseInt(t.charAt(4)),100<=menuTime&&(menuTime=99),world01.visible=world2D.control01.visible=1===courseMD,world02.visible=world2D.control02.visible=2===courseMD,world03.visible=world2D.control03.visible=3===courseMD}class World01 extends THREE.Object3D{constructor(){super();let o=this;o.atom=new SHObject(64,128),o.atom.nComposition=1,o.atom.composition[0]=1,o.atom.composition[1]="100",o.add(o.atom),o.atom.helperXYZ.visible=!0,o.control=world2D.control01,o.control.btnOrbital000.on("click",o.clickBtnOrbital),o.control.btnOrbital100.on("click",o.clickBtnOrbital),o.control.btnOrbital113.on("click",o.clickBtnOrbital),o.control.btnOrbital114.on("click",o.clickBtnOrbital),o.control.btnOrbital200.on("click",o.clickBtnOrbital),o.control.btnOrbital213.on("click",o.clickBtnOrbital),o.control.btnOrbital214.on("click",o.clickBtnOrbital),o.control.btnOrbital223.on("click",o.clickBtnOrbital),o.control.btnOrbital224.on("click",o.clickBtnOrbital);for(var t=0;9>=t;t++)o.control["btnL"+t].on("click",o.clickBtnMLN),o.control["btnM"+t].on("click",o.clickBtnMLN);o.control.btnType1.on("click",o.clickBtnMLN),o.control.btnType2.on("click",o.clickBtnMLN),o.control.btnType3.on("click",o.clickBtnMLN),o.control.btnType4.on("click",o.clickBtnMLN)}update(){let o=this;o.atom.A=1-world2D.slShapeAB.value/100,o.atom.B=world2D.slShapeAB.value/100,o.atom.C=world2D.slShapeCC.value/100,o.atom.calWaveFunction(),o.atom.setGeo(),o.atom.setMat(),o.atom.setHelper();let t=o.atom.composition[1].charAt(0),n=o.atom.composition[1].charAt(1),e=o.atom.composition[1].charAt(2);o.control.pointerQL.x=.9*o.control.pointerQL.x+.1*o.control["btnL"+t].x,o.control.pointerQL.y=.9*o.control.pointerQL.y+.1*o.control["btnL"+t].y,o.control.pointerQM.x=.9*o.control.pointerQM.x+.1*o.control["btnM"+n].x,o.control.pointerQM.y=.9*o.control.pointerQM.y+.1*o.control["btnM"+n].y,o.control.pointerQN.visible=0<e,o.control.pointerQN.visible&&(o.control.pointerQN.x=.9*o.control.pointerQN.x+.1*o.control["btnType"+e].x,o.control.pointerQN.y=.9*o.control.pointerQN.y+.1*o.control["btnType"+e].y,o.control.pointerQN.scaleX=.9*o.control.pointerQN.scaleX+.1*(2.5<e?96:80)/100),3>t&&("0"===n||2.5<e)?(o.control.pointerSPD.visible=!0,o.control.pointerSPD.x=.9*o.control.pointerSPD.x+.1*o.control["btnOrbital"+t+n+e].x,o.control.pointerSPD.y=.9*o.control.pointerSPD.y+.1*o.control["btnOrbital"+t+n+e].y):o.control.pointerSPD.visible=!1;for(var a=0;9>=a;a++)o.control["btnM"+a].visible=a<=t;for(var a=1;4>=a;a++)o.control["btnType"+a].visible="0"!=n}clickBtnOrbital(o){let t=o.target.name,i=world01.atom,n=t.charAt(10),e=t.charAt(11),a=t.charAt(12);"0"===e&&"1"===a&&(a="0"),n+e+a!=i.composition[1]&&(i.composition[1]=n+e+a)}clickBtnMLN(o){let t,i,n,e=o.target.name,s=world01.atom;"L"===e.charAt(3)?(t=e.charAt(4),"0"===t?(i="0",n="0"):s.composition[1].charAt(1)>t?(i=t,n=s.composition[1].charAt(2)):(i=s.composition[1].charAt(1),n="0"===i?"0":s.composition[1].charAt(2))):"M"===e.charAt(3)&&(t=s.composition[1].charAt(0),i=e.charAt(4),n="0"===i?"0":"0"===s.composition[1].charAt(2)?"1":s.composition[1].charAt(2)),"T"===e.charAt(3)&&(t=s.composition[1].charAt(0),i=s.composition[1].charAt(1),n=e.charAt(7)),s.composition[1]=t+i+n}}class World02 extends THREE.Object3D{constructor(){super();let o=this;o.atomC=new SHObject(64,128),o.atomL=new SHObject(32,64,2),o.atomR=new SHObject(32,64,2),o.atomC.nComposition=2,o.atomL.nComposition=1,o.atomR.nComposition=1,o.atomC.composition[0]=o.atomL.composition[0]=Math.SQRT1_2,o.atomC.composition[1]=o.atomL.composition[1]="111",o.atomC.composition[2]=o.atomR.composition[0]=Math.SQRT1_2,o.atomC.composition[3]=o.atomR.composition[1]="112",o.add(o.atomC).add(o.atomL).add(o.atomR),o.atomL.position.x=70*Math.sin(-1.5*Math.PI/6),o.atomL.position.z=-70*Math.cos(-1.5*Math.PI/6),o.atomR.position.x=70*Math.sin(1.5*Math.PI/6),o.atomR.position.z=-70*Math.cos(1.5*Math.PI/6),o.atomC.helperXYZ.visible=!0,o.control=world2D.control02,o.control.btnOrbital113.on("click",o.clickBtnOrbital),o.control.btnOrbital114.on("click",o.clickBtnOrbital),o.control.btnOrbital213.on("click",o.clickBtnOrbital),o.control.btnOrbital214.on("click",o.clickBtnOrbital),o.control.btnOrbital223.on("click",o.clickBtnOrbital),o.control.btnOrbital224.on("click",o.clickBtnOrbital),o.control.slComC1.minimum=-1,o.control.slComC1.maximum=1,o.control.slComC1.digitN=2,o.control.slComC1.value=Math.SQRT1_2,o.control.slComC2.minimum=-1,o.control.slComC2.maximum=1,o.control.slComC2.digitN=2,o.control.slComC2.value=Math.SQRT1_2,o.control.slComC1.slLabelC17.gotoAndStop(0),o.control.slComC2.slLabelC17.gotoAndStop(1),o.atomR.labelMesh.visible=!0,o.atomL.labelMesh.visible=!0,o.atomL.atomLabel.c17.gotoAndStop(0),o.atomR.atomLabel.c17.gotoAndStop(1);let t=1.5*Math.PI/6;o.arrowR=new TEACHER.ObjArrow(2,16777215),o.arrowL=new TEACHER.ObjArrow(2,16777215),o.arrowR.position.x=45*Math.sin(t),o.arrowR.position.z=-45*Math.cos(t),o.arrowL.position.x=45*Math.sin(-t),o.arrowL.position.z=-45*Math.cos(-t),o.arrowR.setArrow(-15*Math.sin(t),0,15*Math.cos(t)),o.arrowL.setArrow(-15*Math.sin(-t),0,15*Math.cos(-t)),o.add(o.arrowR).add(o.arrowL),o.teacher02=new TEACHER.ObjCreatejsPlane(80,20,400,100,new lib.teacher02()),this.teacher02.position.z=0,this.teacher02.position.y=-40,this.teacher02.rotation.x=-Math.PI/4,o.add(o.teacher02),o.control.pointerBtn=new lib.box,o.control.pointerBtn.x=1500,o.control.pointerBtn.y=500,o.control.pointerBtn.scaleX=80/100,o.control.pointerBtn.scaleY=60/100,o.control.addChild(o.control.pointerBtn),o.control.setChildIndex(o.control.pointerBtn,0),o.setToLMN("1","1","3")}update(){let o=this;o.atomL.A=o.atomR.A=o.atomC.A=1-world2D.slShapeAB.value/100,o.atomL.B=o.atomR.B=o.atomC.B=world2D.slShapeAB.value/100,o.atomL.C=o.atomR.C=o.atomC.C=world2D.slShapeCC.value/100,o.atomC.composition[0]=o.control.slComC1.value,o.atomC.composition[2]=o.control.slComC2.value,o.atomL.composition[0]=0>o.control.slComC1.value?-1:1,o.atomR.composition[0]=0>o.control.slComC2.value?-1:1,o.atomL.mesh.scale.x=o.atomL.mesh.scale.y=o.atomL.mesh.scale.z=Math.abs(o.control.slComC1.value),o.atomR.mesh.scale.x=o.atomR.mesh.scale.y=o.atomR.mesh.scale.z=Math.abs(o.control.slComC2.value),o.atomL.calWaveFunction(),o.atomL.setGeo(),o.atomL.setMat(),o.atomR.calWaveFunction(),o.atomR.setGeo(),o.atomR.setMat(),o.atomC.calWaveFunction(),o.atomC.setGeo(),o.atomC.setMat(),o.atomR.setAtomLabel(2),o.atomL.setAtomLabel(2),o.control.pointerBtn.x=.9*o.control.pointerBtn.x+.1*o.control["btnOrbital"+o.lmn].x,o.control.pointerBtn.y=.9*o.control.pointerBtn.y+.1*o.control["btnOrbital"+o.lmn].y}clickBtnOrbital(o){let t=o.target.name,i=t.charAt(10),n=t.charAt(11),e=t.charAt(12);world02.setToLMN(i,n,e)}setToLMN(o,i,n){let e=this,t=e.atomR,a=e.atomL,s=e.atomC,l=world2D.control02,m=e.teacher02,c=e.teacher02.sprite;e.lmn=o+i+n,"113"===e.lmn?(s.composition[1]=a.composition[1]="111",s.composition[3]=t.composition[1]="112",l.slComC1.value=Math.SQRT1_2,l.slComC2.value=Math.SQRT1_2,c.gotoAndStop(0),c.spd.gotoAndStop(2),c.ylm01.ql.gotoAndStop(1),c.ylm02.ql.gotoAndStop(1),c.ylm01.qm.gotoAndStop(1),c.ylm02.qm.gotoAndStop(1),c.ylm01.pn.gotoAndStop(0),c.ylm02.pn.gotoAndStop(1)):"114"===e.lmn?(s.composition[1]=a.composition[1]="111",s.composition[3]=t.composition[1]="112",l.slComC1.value=Math.SQRT1_2,l.slComC2.value=-Math.SQRT1_2,c.gotoAndStop(1),c.spd.gotoAndStop(3),c.ylm01.ql.gotoAndStop(1),c.ylm02.ql.gotoAndStop(1),c.ylm01.qm.gotoAndStop(1),c.ylm02.qm.gotoAndStop(1),c.ylm01.pn.gotoAndStop(0),c.ylm02.pn.gotoAndStop(1)):"213"===e.lmn?(s.composition[1]=a.composition[1]="211",s.composition[3]=t.composition[1]="212",l.slComC1.value=Math.SQRT1_2,l.slComC2.value=Math.SQRT1_2,c.gotoAndStop(0),c.spd.gotoAndStop(5),c.ylm01.ql.gotoAndStop(2),c.ylm02.ql.gotoAndStop(2),c.ylm01.qm.gotoAndStop(1),c.ylm02.qm.gotoAndStop(1),c.ylm01.pn.gotoAndStop(0),c.ylm02.pn.gotoAndStop(1)):"214"===e.lmn?(s.composition[1]=a.composition[1]="211",s.composition[3]=t.composition[1]="212",l.slComC1.value=Math.SQRT1_2,l.slComC2.value=-Math.SQRT1_2,c.gotoAndStop(1),c.spd.gotoAndStop(6),c.ylm01.ql.gotoAndStop(2),c.ylm02.ql.gotoAndStop(2),c.ylm01.qm.gotoAndStop(1),c.ylm02.qm.gotoAndStop(1),c.ylm01.pn.gotoAndStop(0),c.ylm02.pn.gotoAndStop(1)):"223"===e.lmn?(s.composition[1]=a.composition[1]="221",s.composition[3]=t.composition[1]="222",l.slComC1.value=Math.SQRT1_2,l.slComC2.value=Math.SQRT1_2,c.gotoAndStop(0),c.spd.gotoAndStop(7),c.ylm01.ql.gotoAndStop(2),c.ylm02.ql.gotoAndStop(2),c.ylm01.qm.gotoAndStop(2),c.ylm02.qm.gotoAndStop(2),c.ylm01.pn.gotoAndStop(0),c.ylm02.pn.gotoAndStop(1)):"224"===e.lmn&&(s.composition[1]=a.composition[1]="221",s.composition[3]=t.composition[1]="222",l.slComC1.value=Math.SQRT1_2,l.slComC2.value=-Math.SQRT1_2,c.gotoAndStop(1),c.spd.gotoAndStop(8),c.ylm01.ql.gotoAndStop(2),c.ylm02.ql.gotoAndStop(2),c.ylm01.qm.gotoAndStop(2),c.ylm02.qm.gotoAndStop(2),c.ylm01.pn.gotoAndStop(0),c.ylm02.pn.gotoAndStop(1)),c.spd.scaleX="223"===e.lmn?.8:1,m.update()}}class World03 extends THREE.Object3D{constructor(){super();let o=this;o.control=world2D.control03,o.atomMain=new SHObject(64,64),o.add(o.atomMain),o.atomMain.helperXYZ.scale.set(1.5,1.5,1.5),o.atomSubs=[],o.numAtomSubs=o.atomMain.nComposition=7;for(var t=0;t<o.numAtomSubs;t++){let i=new SHObject(32,32,3);i.indexSub=t,i.nComposition=1,i.composition[0]=1,i.composition[1]="100",i.labelMesh.visible=!0;i.position.x=70*Math.cos(Math.PI-t*Math.PI/(o.numAtomSubs-1)),i.position.z=70*Math.sin(-t*Math.PI/(o.numAtomSubs-1)),o.add(i),o.atomSubs.push(i),o.atomMain.composition[2*t+0]=.25,o.atomMain.composition[2*t+1]="111",o.control["slComC"+(t+1)].minimum=-1,o.control["slComC"+(t+1)].maximum=1,o.control["slComC"+(t+1)].value=0,o.control["slComC"+(t+1)].slLabelC17.gotoAndStop(t),o.control["slComC"+(t+1)].digitN=2}o.control.btnHybridSP.on("click",o.clickBtnOrbital),o.control.btnHybridSP2.on("click",o.clickBtnOrbital),o.control.btnHybridSP3.on("click",o.clickBtnOrbital),o.control.btnHybridSP3D.on("click",o.clickBtnOrbital),o.control.btnHybridSP3D2.on("click",o.clickBtnOrbital),o.control.btnHybridSP3D3.on("click",o.clickBtnOrbital),o.control.btnHybridSP2D.on("click",o.clickBtnOrbital),o.control.btnH0.on("click",o.chickH_n),o.control.btnH1.on("click",o.chickH_n),o.control.btnH2.on("click",o.chickH_n),o.control.btnH3.on("click",o.chickH_n),o.control.btnH4.on("click",o.chickH_n),o.control.btnH5.on("click",o.chickH_n),o.control.btnH6.on("click",o.chickH_n),o.control.btnH7.on("click",o.chickH_n),o.control.chBone.checked=!0,o.control.chXYZ.checked=!0,o.control.chData.checked=!0,o.bones=[];let n,e=3,a=16776960;o.boneSP=new THREE.Object3D,o.boneSP.name="SP",o.add(o.boneSP),o.bones.push(o.boneSP),n=new TEACHER.ObjArrow(e,a),n.setArrow(50,0,0),o.boneSP.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrow(-50,0,0),o.boneSP.add(n),o.boneSP.visible=!1,o.boneSP2=new THREE.Object3D,o.boneSP2.name="SP2",o.add(o.boneSP2),o.bones.push(o.boneSP2),n=new TEACHER.ObjArrow(e,a),n.setArrowRTP(50,Math.PI/2,Math.PI/3),o.boneSP2.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrowRTP(50,Math.PI/2,-Math.PI/3),o.boneSP2.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrowRTP(50,Math.PI/2,Math.PI),o.boneSP2.add(n),o.boneSP2.visible=!1,o.boneSP3=new THREE.Object3D,o.boneSP3.name="SP3",o.add(o.boneSP3),o.bones.push(o.boneSP3),n=new TEACHER.ObjArrow(e,a),n.setArrow(50/Math.sqrt(3),50/Math.sqrt(3),50/Math.sqrt(3)),o.boneSP3.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrow(-50/Math.sqrt(3),-50/Math.sqrt(3),50/Math.sqrt(3)),o.boneSP3.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrow(50/Math.sqrt(3),-50/Math.sqrt(3),-50/Math.sqrt(3)),o.boneSP3.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrow(-50/Math.sqrt(3),50/Math.sqrt(3),-50/Math.sqrt(3)),o.boneSP3.add(n),o.boneSP3.visible=!1,o.boneSP2D=new THREE.Object3D,o.boneSP2D.name="SP2D",o.add(o.boneSP2D),o.bones.push(o.boneSP2D),n=new TEACHER.ObjArrow(e,a),n.setArrow(50,0,0),o.boneSP2D.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrow(-50,0,0),o.boneSP2D.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrow(0,0,50),o.boneSP2D.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrow(0,0,-50),o.boneSP2D.add(n),o.boneSP2D.visible=!1,o.boneSP3D=new THREE.Object3D,o.boneSP3D.name="SP3D",o.add(o.boneSP3D),o.bones.push(o.boneSP3D),n=new TEACHER.ObjArrow(e,a),n.setArrow(0,50,0),o.boneSP3D.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrow(0,-50,0),o.boneSP3D.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrowRTP(50,Math.PI/2,0),o.boneSP3D.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrowRTP(50,Math.PI/2,2*Math.PI/3),o.boneSP3D.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrowRTP(50,Math.PI/2,-2*Math.PI/3),o.boneSP3D.add(n),o.boneSP3D.visible=!1,o.boneSP3D2=new THREE.Object3D,o.boneSP3D2.name="SP3D2",o.add(o.boneSP3D2),o.bones.push(o.boneSP3D2),n=new TEACHER.ObjArrow(e,a),n.setArrow(0,50,0),o.boneSP3D2.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrow(0,-50,0),o.boneSP3D2.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrow(50,0,0),o.boneSP3D2.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrow(-50,0,0),o.boneSP3D2.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrow(0,0,50),o.boneSP3D2.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrow(0,0,-50),o.boneSP3D2.add(n),o.boneSP3D2.visible=!1,o.boneSP3D3=new THREE.Object3D,o.boneSP3D3.name="SP3D3",o.add(o.boneSP3D3),o.bones.push(o.boneSP3D3),n=new TEACHER.ObjArrow(e,a),n.setArrow(0,50,0),o.boneSP3D3.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrow(0,-50,0),o.boneSP3D3.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrowRTP(50,Math.PI/2,0),o.boneSP3D3.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrowRTP(50,Math.PI/2,2*Math.PI/5),o.boneSP3D3.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrowRTP(50,Math.PI/2,-2*Math.PI/5),o.boneSP3D3.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrowRTP(50,Math.PI/2,4*Math.PI/5),o.boneSP3D3.add(n),n=new TEACHER.ObjArrow(e,a),n.setArrowRTP(50,Math.PI/2,-4*Math.PI/5),o.boneSP3D3.add(n),o.boneSP3D3.visible=!1,o.cfTable=new TEACHER.ObjCreatejsPlane(160,90,1600,900,new lib.coefficientTable()),o.cfTable.rotation.x=-Math.PI/4,o.cfTable.position.y=-40,o.cfTable.position.z=-40,o.add(o.cfTable),o.setToHybrid("SP3",1)}update(){let o=this;for(var t=0;t<o.numAtomSubs;t++){let i=o.atomSubs[t];.05>Math.abs(o.control["slComC"+(t+1)].value)&&(o.control["slComC"+(t+1)].value=0),o.atomMain.composition[2*t]=o.control["slComC"+(t+1)].value,i.mesh.scale.x=i.mesh.scale.y=i.mesh.scale.z=Math.abs(o.atomMain.composition[2*t]),i.composition[0]=0>o.atomMain.composition[2*t]?-1:1,i.A=1-world2D.slShapeAB.value/100,i.B=world2D.slShapeAB.value/100,i.C=world2D.slShapeCC.value/100,i.calWaveFunction(),i.setGeo(),i.setMat(),i.setAtomLabel(3)}o.atomMain.A=1-world2D.slShapeAB.value/100,o.atomMain.B=world2D.slShapeAB.value/100,o.atomMain.C=world2D.slShapeCC.value/100,o.atomMain.calWaveFunction(),o.atomMain.setGeo(),o.atomMain.setMat(),o.atomMain.helperXYZ.visible=o.control.chXYZ.checked;let n=o.bones.length;for(var t=0;t<n;t++)o.bones[t].visible=o.bones[t].name===o.atomMain.spd&&o.control.chBone.checked;o.control.pointerHybrid.x=.9*o.control.pointerHybrid.x+.1*o.control["btnHybrid"+o.atomMain.spd].x,o.control.pointerHybrid.y=.9*o.control.pointerHybrid.y+.1*o.control["btnHybrid"+o.atomMain.spd].y,o.control.pointerHybrid.scaleX=.9*o.control.pointerHybrid.scaleX+.1*(450<o.control.pointerHybrid.x?110:75)/100,o.control.pointerNN.x=.9*o.control.pointerNN.x+.1*o.control["btnH"+o.atomMain.spdNN].x,o.control.pointerNN.y=.9*o.control.pointerNN.y+.1*o.control["btnH"+o.atomMain.spdNN].y,o.cfTable.visible=o.control.chData.checked}clickBtnOrbital(o){let t=o.target.name;log(t);let i=world03.atomMain,n=world03.atomSubs;"btnHybridSP"===t?world03.setToHybrid("SP",1):"btnHybridSP2"===t?world03.setToHybrid("SP2",1):"btnHybridSP3"===t?world03.setToHybrid("SP3",1):"btnHybridSP3D"===t?world03.setToHybrid("SP3D",1):"btnHybridSP3D2"===t?world03.setToHybrid("SP3D2",1):"btnHybridSP3D3"===t?world03.setToHybrid("SP3D3",1):"btnHybridSP2D"===t&&world03.setToHybrid("SP2D",1)}chickH_n(o){let t=o.target.name,i=parseInt(t.charAt(4));world03.setToHybrid(world03.atomMain.spd,i)}setToHybrid(o,n){let e=this,t=Math.sqrt,a=e.atomMain;a.spd=o,a.spdNN=n;let s=e.control,l=7;"SP"===o?(l=2,e.atomSubs[0].composition[1]=a.composition[1]="000",e.atomSubs[1].composition[1]=a.composition[3]="114",e.cfTable.sprite.gotoAndStop(6),0===n?(s.slComC1.value=a.composition[0]=0,s.slComC2.value=a.composition[2]=0):1===n?(s.slComC1.value=a.composition[0]=1/t(2),s.slComC2.value=a.composition[2]=1/t(2)):2==n&&(s.slComC1.value=a.composition[0]=1/t(2),s.slComC2.value=a.composition[2]=-1/t(2))):"SP2"===o?(l=3,e.atomSubs[0].composition[1]=a.composition[1]="000",e.atomSubs[1].composition[1]=a.composition[3]="113",e.atomSubs[2].composition[1]=a.composition[5]="114",e.cfTable.sprite.gotoAndStop(5),0===n?(s.slComC1.value=a.composition[0]=0,s.slComC2.value=a.composition[2]=0,s.slComC3.value=a.composition[4]=0):1===n?(s.slComC1.value=a.composition[0]=1/t(3),s.slComC2.value=a.composition[2]=1/t(6),s.slComC3.value=a.composition[4]=1/t(2)):2===n?(s.slComC1.value=a.composition[0]=1/t(3),s.slComC2.value=a.composition[2]=1/t(6),s.slComC3.value=a.composition[4]=-1/t(2)):3==n&&(s.slComC1.value=a.composition[0]=1/t(3),s.slComC2.value=a.composition[2]=-2/t(6),s.slComC3.value=a.composition[4]=0)):"SP3"===o?(l=4,e.atomSubs[0].composition[1]=a.composition[1]="000",e.atomSubs[1].composition[1]=a.composition[3]="113",e.atomSubs[2].composition[1]=a.composition[5]="114",e.atomSubs[3].composition[1]=a.composition[7]="100",e.cfTable.sprite.gotoAndStop(4),0===n?(s.slComC1.value=a.composition[0]=0,s.slComC2.value=a.composition[2]=0,s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=0):1===n?(s.slComC1.value=a.composition[0]=.5,s.slComC2.value=a.composition[2]=.5,s.slComC3.value=a.composition[4]=.5,s.slComC4.value=a.composition[6]=.5):2===n?(s.slComC1.value=a.composition[0]=.5,s.slComC2.value=a.composition[2]=.5,s.slComC3.value=a.composition[4]=-.5,s.slComC4.value=a.composition[6]=-.5):3===n?(s.slComC1.value=a.composition[0]=.5,s.slComC2.value=a.composition[2]=-.5,s.slComC3.value=a.composition[4]=-.5,s.slComC4.value=a.composition[6]=.5):4==n&&(s.slComC1.value=a.composition[0]=.5,s.slComC2.value=a.composition[2]=-.5,s.slComC3.value=a.composition[4]=.5,s.slComC4.value=a.composition[6]=-.5)):"SP3D"===o?(l=5,e.atomSubs[0].composition[1]=a.composition[1]="000",e.atomSubs[1].composition[1]=a.composition[3]="113",e.atomSubs[2].composition[1]=a.composition[5]="114",e.atomSubs[3].composition[1]=a.composition[7]="100",e.atomSubs[4].composition[1]=a.composition[9]="200",e.cfTable.sprite.gotoAndStop(2),0===n?(s.slComC1.value=a.composition[0]=0,s.slComC2.value=a.composition[2]=0,s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=0,s.slComC5.value=a.composition[8]=0):1===n?(s.slComC1.value=a.composition[0]=1/t(3),s.slComC2.value=a.composition[2]=t(2/3),s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=0,s.slComC5.value=a.composition[8]=0):2===n?(s.slComC1.value=a.composition[0]=1/t(3),s.slComC2.value=a.composition[2]=-1/t(6),s.slComC3.value=a.composition[4]=1/t(2),s.slComC4.value=a.composition[6]=0,s.slComC5.value=a.composition[8]=0):3===n?(s.slComC1.value=a.composition[0]=1/t(3),s.slComC2.value=a.composition[2]=-1/t(6),s.slComC3.value=a.composition[4]=-1/t(2),s.slComC4.value=a.composition[6]=0,s.slComC5.value=a.composition[8]=0):4===n?(s.slComC1.value=a.composition[0]=0,s.slComC2.value=a.composition[2]=0,s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=1/t(2),s.slComC5.value=a.composition[8]=1/t(2)):5==n&&(s.slComC1.value=a.composition[0]=0,s.slComC2.value=a.composition[2]=0,s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=-1/t(2),s.slComC5.value=a.composition[8]=1/t(2))):"SP3D2"===o?(l=6,e.atomSubs[0].composition[1]=a.composition[1]="000",e.atomSubs[1].composition[1]=a.composition[3]="113",e.atomSubs[2].composition[1]=a.composition[5]="114",e.atomSubs[3].composition[1]=a.composition[7]="100",e.atomSubs[4].composition[1]=a.composition[9]="200",e.atomSubs[5].composition[1]=a.composition[11]="223",e.cfTable.sprite.gotoAndStop(1),0===n?(s.slComC1.value=a.composition[0]=0,s.slComC2.value=a.composition[2]=0,s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=0,s.slComC5.value=a.composition[8]=0,s.slComC6.value=a.composition[10]=0):1===n?(s.slComC1.value=a.composition[0]=1/t(6),s.slComC2.value=a.composition[2]=-1/t(2),s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=0,s.slComC5.value=a.composition[8]=-1/t(12),s.slComC6.value=a.composition[10]=.5):2===n?(s.slComC1.value=a.composition[0]=1/t(6),s.slComC2.value=a.composition[2]=1/t(2),s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=0,s.slComC5.value=a.composition[8]=-1/t(12),s.slComC6.value=a.composition[10]=.5):3===n?(s.slComC1.value=a.composition[0]=1/t(6),s.slComC2.value=a.composition[2]=0,s.slComC3.value=a.composition[4]=-1/t(2),s.slComC4.value=a.composition[6]=0,s.slComC5.value=a.composition[8]=-1/t(12),s.slComC6.value=a.composition[10]=-.5):4===n?(s.slComC1.value=a.composition[0]=1/t(6),s.slComC2.value=a.composition[2]=0,s.slComC3.value=a.composition[4]=1/t(2),s.slComC4.value=a.composition[6]=0,s.slComC5.value=a.composition[8]=-1/t(12),s.slComC6.value=a.composition[10]=-.5):5===n?(s.slComC1.value=a.composition[0]=1/t(6),s.slComC2.value=a.composition[2]=0,s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=-1/t(2),s.slComC5.value=a.composition[8]=1/t(3),s.slComC6.value=a.composition[10]=0):6==n&&(s.slComC1.value=a.composition[0]=1/t(6),s.slComC2.value=a.composition[2]=0,s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=1/t(2),s.slComC5.value=a.composition[8]=1/t(3),s.slComC6.value=a.composition[10]=0)):"SP3D3"===o?(l=7,e.atomSubs[0].composition[1]=a.composition[1]="000",e.atomSubs[1].composition[1]=a.composition[3]="113",e.atomSubs[2].composition[1]=a.composition[5]="114",e.atomSubs[3].composition[1]=a.composition[7]="223",e.atomSubs[4].composition[1]=a.composition[9]="224",e.atomSubs[5].composition[1]=a.composition[11]="100",e.atomSubs[6].composition[1]=a.composition[13]="200",e.cfTable.sprite.gotoAndStop(0),0===n?(s.slComC1.value=a.composition[2]=0,s.slComC2.value=a.composition[0]=0,s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=0,s.slComC5.value=a.composition[8]=0,s.slComC6.value=a.composition[10]=0,s.slComC7.value=a.composition[12]=0):1===n?(s.slComC1.value=a.composition[0]=1/t(10),s.slComC2.value=a.composition[2]=t(2/5),s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=t(2/5),s.slComC5.value=a.composition[8]=0,s.slComC6.value=a.composition[10]=0,s.slComC7.value=a.composition[12]=1/t(10)):2===n?(s.slComC1.value=a.composition[0]=1/t(10),s.slComC2.value=a.composition[2]=(5*t(2)-t(10))/20,s.slComC3.value=a.composition[4]=t((5+t(5))/20),s.slComC4.value=a.composition[6]=-(5*t(2)+t(10))/20,s.slComC5.value=a.composition[8]=t((5-t(5))/20),s.slComC6.value=a.composition[10]=0,s.slComC7.value=a.composition[10]=1/t(10)):3===n?(s.slComC1.value=a.composition[0]=1/t(10),s.slComC2.value=a.composition[2]=(5*t(2)-t(10))/20,s.slComC3.value=a.composition[4]=-t((5+t(5))/20),s.slComC4.value=a.composition[6]=-(5*t(2)+t(10))/20,s.slComC5.value=a.composition[8]=-t((5-t(5))/20),s.slComC6.value=a.composition[10]=0,s.slComC7.value=a.composition[12]=1/t(10)):4===n?(s.slComC1.value=a.composition[0]=1/t(10),s.slComC2.value=a.composition[2]=-(5*t(2)+t(10))/20,s.slComC3.value=a.composition[4]=t((5-t(5))/20),s.slComC4.value=a.composition[6]=(5*t(2)-t(10))/20,s.slComC5.value=a.composition[8]=-t((5+t(5))/20),s.slComC6.value=a.composition[10]=0,s.slComC7.value=a.composition[12]=1/t(10)):5===n?(s.slComC1.value=a.composition[0]=1/t(10),s.slComC2.value=a.composition[2]=-(5*t(2)+t(10))/20,s.slComC3.value=a.composition[4]=-t((5-t(5))/20),s.slComC4.value=a.composition[6]=(5*t(2)-t(10))/20,s.slComC5.value=a.composition[8]=t((5+t(5))/20),s.slComC6.value=a.composition[10]=0,s.slComC7.value=a.composition[12]=1/t(10)):6===n?(s.slComC1.value=a.composition[0]=1/t(4),s.slComC2.value=a.composition[2]=0,s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=0,s.slComC5.value=a.composition[8]=0,s.slComC6.value=a.composition[10]=1/t(2),s.slComC7.value=a.composition[12]=1/t(4)):7==n&&(s.slComC1.value=a.composition[0]=1/t(4),s.slComC2.value=a.composition[2]=0,s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=0,s.slComC5.value=a.composition[8]=0,s.slComC6.value=a.composition[10]=-1/t(2),s.slComC7.value=a.composition[12]=1/t(4))):"SP2D"==o&&(l=4,e.atomSubs[0].composition[1]=a.composition[1]="000",e.atomSubs[1].composition[1]=a.composition[3]="113",e.atomSubs[2].composition[1]=a.composition[5]="114",e.atomSubs[3].composition[1]=a.composition[7]="223",e.cfTable.sprite.gotoAndStop(3),0===n?(s.slComC1.value=a.composition[0]=0,s.slComC2.value=a.composition[2]=0,s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=0):1===n?(s.slComC1.value=a.composition[0]=.5,s.slComC2.value=a.composition[2]=1/t(2),s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=.5):2===n?(s.slComC1.value=a.composition[0]=.5,s.slComC2.value=a.composition[2]=-1/t(2),s.slComC3.value=a.composition[4]=0,s.slComC4.value=a.composition[6]=.5):3===n?(s.slComC1.value=a.composition[0]=.5,s.slComC2.value=a.composition[2]=0,s.slComC3.value=a.composition[4]=1/t(2),s.slComC4.value=a.composition[6]=-.5):4==n&&(s.slComC1.value=a.composition[0]=.5,s.slComC2.value=a.composition[2]=0,s.slComC3.value=a.composition[4]=-1/t(2),s.slComC4.value=a.composition[6]=-.5)),e.cfTable.update(),e.atomMain.nComposition=l;for(var m=0;m<e.numAtomSubs;m++){let o=e.atomSubs[m],t=-(m+1)*Math.PI/(l+1);o.visible=m<l,e.control["slComC"+(m+1)].visible=m<l;o.position.x=70*Math.cos(Math.PI+t),o.position.z=70*Math.sin(t),e.control["btnH"+(m+1)].visible=m<l}}}class SHObject extends THREE.Object3D{constructor(o,i,n){super();var e=this;Math.sqrt;e.A=0,e.B=1,e.C=.5,e.segWH=o,e.geo=new THREE.PlaneGeometry(50,50,e.segWH,e.segWH),e.matCanvas2D=document.createElement("canvas"),e.matCanvas2D.width=e.matCanvas2D.height=i+1,e.canvasWH=i,e.mapTexture=new THREE.Texture(e.matCanvas2D),e.mapTexture.needsUpdate=!0;var t=new THREE.MeshStandardMaterial({map:e.mapTexture,roughness:.4});e.mesh=new THREE.Mesh(e.geo,t),e.add(e.mesh),e.ctx=e.matCanvas2D.getContext("2d"),e.imageData=e.ctx.getImageData(0,0,e.canvasWH+1,e.canvasWH+1),e.cc=new THREE.Color,e.nComposition=7,e.composition=[.5,"000",-.5,"113",+.5,"114",-.5,"100",0,"113",0,"113",0,"113"],e.wfNow=new Float32Array(2*(e.canvasWH+1)*(e.canvasWH+1));let a=.5,s=10066329;if(e.helperXYZ=new THREE.Object3D,e.add(e.helperXYZ),e.helperXYZ.add(new TEACHER.ObjBox(60,a,a,s)),e.helperXYZ.add(new TEACHER.ObjBox(a,60,a,s)),e.helperXYZ.add(new TEACHER.ObjBox(a,a,60,s)),e.coordX=new TEACHER.ObjPicPlane(5,5,"allData/pics/coordX.png","z",2),e.coordX.position.z=32,e.coordY=new TEACHER.ObjPicPlane(5,5,"allData/pics/coordY.png","z",2),e.coordY.position.x=32,e.coordZ=new TEACHER.ObjPicPlane(5,5,"allData/pics/coordZ.png","z",2),e.coordZ.position.y=32,e.helperXYZ.add(e.coordX).add(e.coordY).add(e.coordZ),e.helperXYZ.visible=!1,0<n){var l=document.createElement("canvas");l.width=200,l.height=100,e.labelStage=new createjs.Stage(l),e.atomLabel=new lib["atomLabel0"+n],e.labelStage.addChild(e.atomLabel),e.labelStage.update(),e.labelMapTexture=new THREE.Texture(l),e.labelMapTexture.needsUpdate=!0;var t=new THREE.MeshBasicMaterial({map:e.labelMapTexture,side:2,transparent:!0});e.labelMesh=new THREE.Mesh(new THREE.PlaneGeometry(20,10,1,1),t),e.labelMesh.position.y=20,e.labelMesh.position.z=-10,e.add(e.labelMesh),e.labelMesh.visible=!1}}setGeo(){let o=this,t=o.segWH;for(var i=o.geo.attributes.position.array,n=0;n<=t;n++){let a=Math.PI*n/t;for(var e=0;e<=t;e++){let s=2*Math.PI*e/t-Math.PI,l=o.wfNow[2*(n*o.canvasWH/t*(o.canvasWH+1)+e*o.canvasWH/t)+0],m=o.wfNow[2*(n*o.canvasWH/t*(o.canvasWH+1)+e*o.canvasWH/t)+1],c=o.waveFunctionToGeo(l,m);i[3*(n*(t+1)+e)+0]=c*Math.sin(a)*Math.sin(s),i[3*(n*(t+1)+e)+1]=c*Math.cos(a),i[3*(n*(t+1)+e)+2]=c*Math.sin(a)*Math.cos(s)}}o.geo.attributes.position.needsUpdate=!0,o.geo.computeBoundingBox(),o.geo.computeBoundingSphere(),o.geo.computeVertexNormals()}setMat(){let o=this,t=o.canvasWH,i=o.imageData.data;for(var n=0;n<=t;n++)for(var e=0;e<=t;e++){let a=o.wfNow[2*(n*(t+1)+e)+0];i[4*(n*(t+1)+e)+0]=0<a?255:0,i[4*(n*(t+1)+e)+1]=0,i[4*(n*(t+1)+e)+2]=0>a?255:0,i[4*(n*(t+1)+e)+3]=255}o.ctx.putImageData(o.imageData,0,0),o.mapTexture.needsUpdate=!0}waveFunctionToGeo(o,i){let n=this,t=Math.pow,e=20*n.A;return e+=30*n.B*t(o*o+i*i,1/4),e+=10*n.C*o,e}calWaveFunction(){let o=this,t=o.canvasWH,n=o.nComposition;for(var e=0;e<n;e++){let i=o.composition[2*e+0],n=o.composition[2*e+1],r=parseInt(n.charAt(0)),p=parseInt(n.charAt(1)),C=parseInt(n.charAt(2));for(var a=0;a<=t;a++)for(var s,l=Math.PI*a/t,m=o.getSPHYlm(r,p,l),c=0;c<=t;c++){s=2*Math.PI*c/t-Math.PI;let n,l;1===C||2===C?(n=m*Math.cos(p*s*(1.5>C?1:-1)-tt),l=m*Math.sin(p*s*(1.5>C?1:-1)-tt)):3===C?(n=m*(Math.cos(p*s-tt)+Math.cos(-p*s-tt))*Math.SQRT1_2,l=m*(Math.sin(p*s-tt)+Math.sin(-p*s-tt))*Math.SQRT1_2):4===C?(n=m*(Math.cos(p*(s-Math.PI/2/p)-tt)+Math.cos(-p*(s-Math.PI/2/p)-tt))*Math.SQRT1_2,l=m*(Math.sin(p*(s-Math.PI/2/p)-tt)+Math.sin(-p*(s-Math.PI/2/p)-tt))*Math.SQRT1_2):0===C&&0===p?(n=m*Math.cos(-tt),l=m*Math.sin(-tt)):log("qn\u932F\u8AA4!!!"),0===e?(o.wfNow[2*(a*(t+1)+c)+0]=n*i,o.wfNow[2*(a*(t+1)+c)+1]=l*i):(o.wfNow[2*(a*(t+1)+c)+0]+=n*i,o.wfNow[2*(a*(t+1)+c)+1]+=l*i)}}}getSPHYlm(o,t,i){let n=Math.sin(i),e=Math.cos(i),a=Math.PI,s=Math.sqrt,l=Math.pow,m=Math.abs,c=0;return 0===o?c=s(1/a)/2:1===o?1===m(t)?c=s(3/2/a)/2*n:0===t&&(c=s(3/a)/2*e):2===o?2===m(t)?c=s(15/2/a)/4*l(n,2):1===m(t)?c=s(15/2/a)/2*n*e:0===t&&(c=s(5/a)/4*(3*l(e,2)-1)):3===o?3===m(t)?c=s(35/a)/8*l(n,3):2===m(t)?c=s(105/2/a)/4*l(n,2)*e:1===m(t)?c=s(21/a)/8*n*(5*l(e,2)-1):0===t&&(c=s(7/a)/4*(5*l(e,3)-3*e)):4===o?4===m(t)?c=3*s(35/2/a)/16*l(n,4):3===m(t)?c=3*s(35/a)/8*l(n,3)*e:2===m(t)?c=3*s(5/2/a)/8*l(n,2)*(7*l(e,2)-1):1===m(t)?c=3*s(5/a)/8*n*(7*l(e,3)-3*e):0===t&&(c=3*s(1/a)/16*(35*l(e,4)-30*l(e,2)+3)):5===o?5===m(t)?c=3*s(77/a)/32*l(n,5):4===m(t)?c=3*s(385/2/a)/16*l(n,4)*e:3===m(t)?c=1*s(385/a)/32*l(n,3)*(9*l(e,2)-1):2===m(t)?c=1*s(1155/2/a)/8*l(n,2)*(3*l(e,3)-e):1===m(t)?c=1*s(165/2/a)/16*n*(21*l(e,4)-14*l(e,2)+1):0===t&&(c=1*s(11/a)/16*(63*l(e,5)-70*l(e,3)+15*e)):6===o?6===m(t)?c=s(3003/a)/64*l(n,6):5===m(t)?c=3*s(1001/a)/32*l(n,5)*e:4===m(t)?c=3*s(91/2/a)/32*l(n,4)*(11*l(e,2)-1):3===m(t)?c=s(1635/a)/32*l(n,3)*(11*l(e,3)-3*e):2===m(t)?c=s(1365/a)/64*l(n,2)*(33*l(e,4)-18*l(e,2)+1):1===m(t)?c=s(273/2/a)/16*n*(33*l(e,5)-30*l(e,3)+5*e):0===t&&(c=s(13/a)/32*(231*l(e,6)-315*l(e,4)+105*l(e,2)-5)):7===o?7===m(t)?c=3*s(715/2/a)/64*l(n,7):6===m(t)?c=3*s(5005/a)/64*l(n,6)*e:5===m(t)?c=3*s(385/2/a)/64*l(n,5)*(13*l(e,2)-1):4===m(t)?c=3*s(385/2/a)/32*l(n,4)*(13*l(e,3)-3*e):3===m(t)?c=3*s(35/2/a)/64*l(n,3)*(143*l(e,4)-66*l(e,2)+3):2===m(t)?c=3*s(35/a)/64*l(n,2)*(143*l(e,5)-110*l(e,3)+15*e):1===m(t)?c=s(105/2/a)/64*n*(429*l(e,6)-495*l(e,4)+135*l(e,2)-5):0===t&&(c=s(15/a)/32*(429*l(e,7)-693*l(e,5)+315*l(e,3)-35*e)):8===o?8===m(t)?c=3*s(12155/2/a)/256*l(n,8):7===m(t)?c=3*s(12155/2/a)/64*l(n,7)*e:6===m(t)?c=s(7293/a)/128*l(n,6)*(15*l(e,2)-1):5===m(t)?c=3*s(17017/2/a)/64*l(n,5)*(5*l(e,3)-e):4===m(t)?c=3*s(1309/2/a)/128*l(n,4)*(65*l(e,4)-26*l(e,2)+1):3===m(t)?c=s(19635/2/a)/64*l(n,3)*(39*l(e,5)-26*l(e,3)+3*e):2===m(t)?c=3*s(595/a)/128*l(n,2)*(143*l(e,6)-143*l(e,4)+33*l(e,2)-1):1===m(t)?c=3*s(17/2/a)/64*n*(715*l(e,7)-1001*l(e,5)+385*l(e,3)-35*e):0===t&&(c=s(17/a)/256*(6435*l(e,8)-12012*l(e,6)+6930*l(e,4)-1260*l(e,2)+35)):9==o&&(9===m(t)?c=s(230945/a)/512*l(n,9):8===m(t)?c=3*s(230945/2/a)/256*l(n,8)*e:7===m(t)?c=3*s(13585/a)/512*l(n,7)*(17*l(e,2)-1):6===m(t)?c=s(40755/a)/128*l(n,6)*(17*l(e,3)-3*e):5===m(t)?c=3*s(2717/a)/256*l(n,5)*(85*l(e,4)-30*l(e,2)+1):4===m(t)?c=3*s(95095/2/a)/128*l(n,4)*(17*l(e,5)-10*l(e,3)+e):3===m(t)?c=s(21945/a)/256*l(n,3)*(221*l(e,6)-195*l(e,4)+39*l(e,2)-1):2===m(t)?c=3*s(1045/a)/128*l(n,2)*(221*l(e,7)-273*l(e,5)+91*l(e,3)-7*e):1===m(t)?c=3*s(95/2/a)/256*n*(2431*l(e,8)-4004*l(e,6)+2002*l(e,4)-308*l(e,2)+7):0===t&&(c=s(19/a)/256*(12155*l(e,9)-25740*l(e,7)+18018*l(e,5)-4620*l(e,3)+315*e))),c}getRadialRnl(o,t,i){let n=2*i/o,e=Math.sqrt,a=Math.pow,s=Math.exp,l=0;return 1===o?l=2:2===o?1===t?l=1/2/6*n:0==t&&(l=1/2/e(2)*(2-n)):3===o?2===t?l=1/9/e(30)*a(n,2):1===t?l=1/9/e(6)*n*(4-n):0==t&&(l=1/9/e(3)*(6-6*n+a(n,2))):4===o?3===t?l=1/96/e(35)*a(n,3):2===t?l=1/96/e(5)*a(n,2)*(6-n):1===t?l=1/32/e(15)*n*(20-10*n+a(n,2)):0==t&&(l=1/96*(24-36*n+12*a(n,2)-a(n,3))):5==o&&(4===t?l=1/900/e(70)*a(n,4):3===t?l=1/300/e(70)*a(n,3)*(8-n):2===t?l=1/150/e(70)*a(n,2)*(42-14*n+a(n,2)):1===t?l=1/150/e(30)*n*(120-90*n+18*a(n,2)-a(n,3)):0==t&&(l=1/300/e(5)*(120-240*n+120*a(n,2)-20*a(n,3)+a(n,4)))),l*=s(-n/2),l}setAtomLabel(o){let i=this;1===o||(2===o?(i.atomLabel.ylm.ql.gotoAndStop(i.composition[1].charAt(0)),i.atomLabel.ylm.qm.gotoAndStop(i.composition[1].charAt(1)),i.atomLabel.ylm.pn.gotoAndStop("1"===i.composition[1].charAt(2)?0:1)):3==o&&("000"===i.composition[1]?i.atomLabel.spd.gotoAndStop(0):"100"===i.composition[1]?i.atomLabel.spd.gotoAndStop(1):"113"===i.composition[1]?i.atomLabel.spd.gotoAndStop(2):"114"===i.composition[1]?i.atomLabel.spd.gotoAndStop(3):"200"===i.composition[1]?i.atomLabel.spd.gotoAndStop(4):"213"===i.composition[1]?i.atomLabel.spd.gotoAndStop(5):"214"===i.composition[1]?i.atomLabel.spd.gotoAndStop(6):"223"===i.composition[1]?i.atomLabel.spd.gotoAndStop(7):"224"===i.composition[1]&&i.atomLabel.spd.gotoAndStop(8),i.atomLabel.c17.gotoAndStop(i.indexSub))),i.labelStage.update(),i.labelMapTexture.needsUpdate=!0}setHelper(){let o=this;o.coordX.lookAt(world3D.camera.position),o.coordY.lookAt(world3D.camera.position),o.coordZ.lookAt(world3D.camera.position)}initOutLine(){let o=this;o.outlineNNtheta=64,o.outlineNNPhi=64,o.outlineTheta=new TEACHER.Line(16776960,2,o.outlineNNtheta+1),o.outlinePhi=new TEACHER.Line(16776960,2,o.outlineNNPhi+1);for(var t=0;t<=o.outlineNNtheta;t++)o.outlineTheta.addPoint(-50+100*(t/o.canvasWH),0,-50+100*(t/o.canvasWH));for(var t=0;t<=o.outlineNNPhi;t++)o.outlinePhi.addPoint(-50+100*(t/o.canvasWH),-50+100*(t/o.canvasWH),0);o.outlineTheta.update(),o.outlinePhi.update(),o.add(o.outlineTheta).add(o.outlinePhi),o.outlineTheta.visible=o.outlinePhi.visible=!1}updateOutLine(o,n){log(o);let e=this;for(var t=0;t<=e.outlineNNtheta;t++){let i=t/e.outlineNNtheta*Math.PI,a=e.getSPHYlm(o,n,i),s=20*e.A;s+=30*e.B*Math.pow(a*a,1/4),s+=10*e.C*a,s*=1.1,e.outlineTheta.setPoint(t,s*Math.sin(i),s*Math.cos(i),0)}for(var t=0;t<=e.outlineNNPhi;t++);e.outlineTheta.update(),e.outlinePhi.update()}}var TEACHER={};TEACHER.ObjPlane=class extends THREE.Object3D{constructor(o,i,n,e,a){super();let s=this;s.mat=new TEACHER.MSMat(n,a),s.geo=new THREE.PlaneGeometry(o||10,i||10,1,1),s.mesh=new THREE.Mesh(s.geo,s.mat),"x"===e?s.mesh.rotation.y=.5*Math.PI:"y"==e&&(s.mesh.rotation.x=-.5*Math.PI),s.add(s.mesh)}},TEACHER.ObjCylinder=class extends THREE.Object3D{constructor(o,i,n,e,a,s){super();let l=this;l.mat=new TEACHER.MSMat(n,s),l.geo=new THREE.CylinderGeometry(o||10,o||10,i||10,32,2,e),l.mesh=new THREE.Mesh(l.geo,l.mat),"x"===a?l.mesh.rotation.z=-.5*Math.PI:"z"==a&&(l.mesh.rotation.x=.5*Math.PI),l.add(l.mesh)}},TEACHER.ObjSphere=class extends THREE.Object3D{constructor(o,i,n){super();let e=this;e.mat=new TEACHER.MSMat(i,n),e.geo=new THREE.SphereGeometry(o||10,32,16),e.mesh=new THREE.Mesh(e.geo,e.mat),e.add(e.mesh)}},TEACHER.ObjBox=class extends THREE.Object3D{constructor(o,i,n,e,a){super();let s=this;s.mat=new TEACHER.MSMat(e,a),s.geo=new THREE.BoxGeometry(o||10,i||10,n||10),s.mesh=new THREE.Mesh(s.geo,s.mat),s.add(s.mesh)}},TEACHER.MSMat=class extends THREE.MeshStandardMaterial{constructor(o,t){super({color:o||16711935,roughness:.4,side:t||0})}},TEACHER.ObjPicPlane=class extends THREE.Object3D{constructor(o,i,n,e,a){super();let s=this,t=new THREE.TextureLoader().load(n);s.mat=new THREE.MeshBasicMaterial({map:t,transparent:!0,side:a||0}),s.geo=new THREE.PlaneGeometry(o,i,1,1),s.mesh=new THREE.Mesh(s.geo,s.mat),"x"===e?s.mesh.rotation.y=.5*Math.PI:"y"==e&&(s.mesh.rotation.x=-.5*Math.PI),s.add(s.mesh)}},TEACHER.ObjPicCylinder=class extends THREE.Object3D{constructor(o,i,n,e,a,s){super();let l=this,t=new THREE.TextureLoader().load(n);l.mat=new THREE.MeshBasicMaterial({map:t,side:s||0}),l.geo=new THREE.CylinderGeometry(o||10,o||10,i||10,32,4,e),l.mesh=new THREE.Mesh(l.geo,l.mat),"x"===a?l.mesh.rotation.z=-.5*Math.PI:"z"===a?(l.mesh.rotation.y=.5*Math.PI,l.mesh.rotation.x=.5*Math.PI):"y"==a&&(l.mesh.rotation.y=.5*Math.PI),l.add(l.mesh)}},TEACHER.ObjPicSphere=class extends THREE.Object3D{constructor(o,i,n){super();let e=this,t=new THREE.TextureLoader().load(i);e.mat=new THREE.MeshBasicMaterial({map:t,side:n||0}),e.geo=new THREE.SphereGeometry(o||10,32,16),e.mesh=new THREE.Mesh(e.geo,e.mat),e.add(e.mesh)}},TEACHER.ObjArrow=class extends THREE.Object3D{constructor(o,t){super();let i=.5,n=new THREE.MeshStandardMaterial({color:t||16711935,roughness:.4}),e=new THREE.ConeGeometry(o||10,40,32);this.ArrowHead=new THREE.Mesh(e,n),this.ArrowHead.position.y=80,e=new THREE.CylinderGeometry((o||10)*i,(o||10)*i,60,32,2),this.ArrowBody=new THREE.Mesh(e,n),this.ArrowBody.position.y=30,this.rotX=new THREE.Object3D,this.rotY=new THREE.Object3D,this.add(this.rotY),this.rotY.add(this.rotX),this.rotX.add(this.ArrowBody),this.rotX.add(this.ArrowHead)}setArrow(o,t,i){let n=o*o+t*t+i*i,e=Math.sqrt(n);0<n?(this.rotX.visible=!0,this.rotX.scale.y=e/100):this.rotX.visible=!1,this.rotX.rotation.x=Math.acos(t/e),this.rotY.rotation.y=Math.atan2(o,i)}setArrowRTP(o,t,i){this.setArrow(o*Math.sin(t)*Math.sin(i),o*Math.cos(t),o*Math.sin(t)*Math.cos(i))}},TEACHER.ObjSpring=class extends THREE.Object3D{constructor(o,t,n,e,a){super();let s=o||20;this.L0=s;let l=[],m=e||5,c=t||5;l.push(new THREE.Vector3(0,0,0)),l.push(new THREE.Vector3(0,.05*s,0));for(var r=0;r<=16*m;r++)l.push(new THREE.Vector3(c*Math.cos(2*r*Math.PI/16),s*(.05+.9*r/m/16),c*Math.sin(2*r*Math.PI/16)));l.push(new THREE.Vector3(0,.95*s,0)),l.push(new THREE.Vector3(0,s,0));let p=new THREE.CatmullRomCurve3(l),C=new THREE.MeshStandardMaterial({color:a||16711935,roughness:.4}),b=new THREE.TubeGeometry(p,500,n||.5,12);this.mesh=new THREE.Mesh(b,C),this.rotX=new THREE.Object3D,this.rotY=new THREE.Object3D,this.add(this.rotY),this.rotY.add(this.rotX),this.rotX.add(this.mesh)}setSpring(o,t,i){let n=o*o+t*t+i*i,e=Math.sqrt(n);0<n?(this.rotX.visible=!0,this.rotX.scale.y=e/this.L0):this.rotX.visible=!1,this.rotX.rotation.x=Math.acos(t/e),this.rotY.rotation.y=Math.atan2(o,i)}},TEACHER.Points=class extends THREE.Points{constructor(o,t,i){let n=new THREE.Color(o||16711935),e=new THREE.BufferGeometry,a=[];e.setAttribute("position",new THREE.Float32BufferAttribute(a,3)),e.computeBoundingSphere();let s=new THREE.PointsMaterial({size:t||1,map:TEACHER.Points.createCanvasMaterial("#"+n.getHexString(),64),transparent:!0,depthWrite:!1});super(e,s);let l=this;l.nnMax=i||1e4,l.nnNow=0,l.geometry=e,l.positions=a}static createCanvasMaterial(o,t){var i=document.createElement("canvas");i.width=i.height=t;var n=i.getContext("2d");n.imageSmoothingEnabled=!1;var e=new THREE.Texture(i),a=t/2;return n.beginPath(),n.arc(a,a,t/2-3,0,2*Math.PI,!1),n.closePath(),n.fillStyle=o,n.fill(),e.needsUpdate=!0,e}addPoint(o,t,i){let n=this;n.nnNow<n.nnMax?n.nnNow++:(log("TEACHER.Points \u5230\u9054\u6700\u5927\u9EDE\u6578"),n.positions.shift(),n.positions.shift(),n.positions.shift()),n.positions.push(o,t,i)}clear(){let o=this;o.positions=[],o.nnNow=0,o.update()}setPoint(o,t,i,n){let e=this;o>e.nnMax?log("\u8F38\u5165\u7684n\u503C\u5927\u65BCTEACHER.Points \u6700\u5927\u9EDE\u6578 nnMax"):o>e.nnNow?log("\u8F38\u5165\u7684n\u503C\u5927\u65BCTEACHER.Points \u73FE\u5728\u9EDE\u6578 nnNow"):(e.positions[3*o]=t,e.positions[3*o+1]=i,e.positions[3*o+2]=n)}getPoint(o){let t=this,i=new THREE.Vector3;return o>t.nnMax?log("\u8F38\u5165\u7684n\u503C\u5927\u65BCTEACHER.Points \u6700\u5927\u9EDE\u6578 nnMax"):o>t.nnNow?log("\u8F38\u5165\u7684n\u503C\u5927\u65BCTEACHER.Points \u73FE\u5728\u9EDE\u6578 nnNow"):(i.x=t.positions[3*o],i.y=t.positions[3*o+1],i.z=t.positions[3*o+2]),i}update(){let o=this;o.geometry.setAttribute("position",new THREE.Float32BufferAttribute(o.positions,3)),o.geometry.computeBoundingSphere(),o.geometry.attributes.position.needsUpdate=!0}},TEACHER.Line=class extends THREE.Line2{constructor(o,t,i){let n=i||1e4;var e=new THREE.LineMaterial({color:o||16711935,linewidth:t||1});e.resolution.set(window.innerWidth,window.innerHeight);let a=new THREE.LineGeometry,s=new Float32Array(3*n);a.setPositions(s),super(a,e);let l=this;l.nnMax=n,l.lineWidth=t||1,l.nnNow=0,l.geometry=a,l.positions=s}addPoint(o,t,n){let e=this;if(e.nnNow<e.nnMax)e.nnNow++;else{log("TEACHER.Line \u5230\u9054\u6700\u5927\u9EDE\u6578");for(var a=0;a<e.nnMax-1;a++)e.positions[3*a]=e.positions[3*a+3],e.positions[3*a+1]=e.positions[3*a+4],e.positions[3*a+2]=e.positions[3*a+5]}for(var a=e.nnNow;a<=e.nnMax;a++)e.positions[3*(a-1)]=o,e.positions[3*(a-1)+1]=t,e.positions[3*(a-1)+2]=n}clear(){let o=this;o.positions=new Float32Array(3*o.nnMax);o.nnNow=0,o.update()}setPoint(o,t,i,n){let e=this;o>e.nnMax?log("\u8F38\u5165\u7684n\u503C\u5927\u65BCTEACHER.Line \u6700\u5927\u9EDE\u6578 nnMax"):o>e.nnNow?log("\u8F38\u5165\u7684n\u503C\u5927\u65BCTEACHER.Line \u73FE\u5728\u9EDE\u6578 nnNow"):(e.positions[3*o]=t,e.positions[3*o+1]=i,e.positions[3*o+2]=n)}getPoint(o){let t=this,i=new THREE.Vector3;return o>t.nnMax?log("\u8F38\u5165\u7684n\u503C\u5927\u65BCTEACHER.Line \u6700\u5927\u9EDE\u6578 nnMax"):o>t.nnNow?log("\u8F38\u5165\u7684n\u503C\u5927\u65BCTEACHER.Line \u73FE\u5728\u9EDE\u6578 nnNow"):(i.x=t.positions[3*o],i.y=t.positions[3*o+1],i.z=t.positions[3*o+2]),i}update(){let o=this,t=o.getPoint(o.nnNow-1);for(var n=o.nnNow;n<=o.nnMax;n++)o.positions[3*n]=t.x,o.positions[3*n+1]=t.y,o.positions[3*n+2]=t.z;o.geometry.setPositions(o.positions)}},TEACHER.ObjTextPlane=class extends THREE.Object3D{constructor(o,i,n,e,a,s){super();let l=this,t=Math.round(Math.log2(o/i)),m=$("<canvas>").attr("width",128*Math.pow(2,t)+"").attr("height","128");l.stage=new createjs.Stage(m[0]);let c=new createjs.Container;if(s){let o=new createjs.Shape,i=new THREE.Color(s);o.graphics.c().f("#"+i.getHexString()).dr(0,0,128*Math.pow(2,t),128),c.addChild(o)}l.ctext=new createjs.Text;let r=new THREE.Color(a||16777215);l.ctext.color="#"+r.getHexString(),l.ctext.font="96px Arial",l.ctext.text=n||"",l.ctext.textAlign="center",l.ctext.textBaseline="middle",l.ctext.x=128*Math.pow(2,t)/2,l.ctext.y=64,c.addChild(l.ctext),l.stage.addChild(c),l.stage.update(),l.texture=new THREE.Texture(m[0]);var p=new THREE.MeshBasicMaterial({map:l.texture,transparent:!0}),C=new THREE.PlaneGeometry(o||10,i||10,1,1);l.texture.needsUpdate=!0,l.plane1=new THREE.Mesh(C,p),l.plane2=new THREE.Mesh(C,p),l.plane2.rotation.y=Math.PI;let b=new THREE.Object3D;b.add(l.plane1).add(l.plane2),"x"===e?b.rotation.y=.5*Math.PI:"y"==e&&(b.rotation.x=-.5*Math.PI),l.add(b)}setText(o){let i=this;i.ctext.text=o,i.stage.update(),i.texture.needsUpdate=!0}},TEACHER.ObjGraph=class extends THREE.Object3D{constructor(o,i,n,e,a,s,l){super();let m=this;m.objCon=new THREE.Object3D,m._xMin=o||0,m._xMax=i||10,m._yMin=n||0,m._yMax=e||10,m.divXN=5,m.divYN=4,m.frameMat=new THREE.LineBasicMaterial({color:a||16777215});for(var t=[],c=0;c<=m.divXN;c++)t.push(new THREE.Vector3(-50+20*c,0,0)),t.push(new THREE.Vector3(-50+20*c,50,0));for(var r=0;r<=m.divYN;r++)t.push(new THREE.Vector3(-50,12.5*r,0)),t.push(new THREE.Vector3(50,12.5*r,0));let p=new THREE.BufferGeometry().setFromPoints(t);m.frame=new THREE.LineSegments(p,m.frameMat),m.objCon.add(m.frame),m.labelXMin=new TEACHER.ObjTextPlane(20,5,m._xMin+"","z",a||16777215),m.labelXMin.position.x=-50,m.labelXMin.position.y=-3,m.objCon.add(m.labelXMin),m.labelXMax=new TEACHER.ObjTextPlane(20,5,m._xMax+"","z",a||16777215),m.labelXMax.position.x=50,m.labelXMax.position.y=-3,m.objCon.add(m.labelXMax),m.labelYMin=new TEACHER.ObjTextPlane(20,5,m._yMin+"","z",a||16777215),m.labelYMin.position.x=-53,m.labelYMin.position.y=0,m.objCon.add(m.labelYMin),m.labelYMax=new TEACHER.ObjTextPlane(20,5,m._yMax+"","z",a||16777215),m.labelYMax.position.x=-53,m.labelYMax.position.y=50,m.objCon.add(m.labelYMax),m.labelX=new TEACHER.ObjTextPlane(24,7,"x","z",a||16777215),m.labelX.position.x=60,m.labelX.position.y=4,m.labelX.position.z=1,m.labelY=new TEACHER.ObjTextPlane(24,7,"y","z",a||16777215),m.labelY.position.x=-60,m.labelY.position.y=25,m.labelY.position.z=1,m.labelY.rotation.z=Math.PI/2,m.labelTitle=new TEACHER.ObjTextPlane(40,10,"y-x","z",a||16777215),m.labelTitle.position.y=53,m.labelTitle.position.z=1,m.objCon.add(m.labelX).add(m.labelY).add(m.labelTitle),m._lineColor=s,m._nnMax=l,m.line=new TEACHER.Line(m._lineColor||16776960,2,m._nnMax),m.objCon.add(m.line),m.changeScale(),m.add(m.objCon)}addPoint(o,t){let i=this;i.line.addPoint(o,t,0),i.line.update()}clear(){let o=this;o.line.clear()}changeScale(){let o=this;o.line.scale.x=100/(o._xMax-o._xMin),o.line.scale.y=50/(o._yMax-o._yMin),o.line.position.x=-50-o._xMin*o.line.scale.x,o.line.position.y=-o._yMin*o.line.scale.y,o.labelXMin.setText(o._xMin),o.labelXMax.setText(o._xMax),o.labelYMin.setText(o._yMin),o.labelYMax.setText(o._yMax)}setLabel(o,t,i){let n=this;n.labelTitle.setText(o||"y-x"),n.labelY.setText(t||"y"),n.labelX.setText(i||"x")}get xMin(){return this._xMin}set xMin(o){this._xMin=o,this.changeScale()}get xMax(){return this._xMax}set xMax(o){this._xMax=o,this.changeScale()}get yMin(){return this._yMin}set yMin(o){this._yMin=o,this.changeScale()}get yMax(){return this._yMax}set yMax(o){this._yMax=o,this.changeScale()}},TEACHER.ObjCreatejsPlane=class extends THREE.Object3D{constructor(o,i,n,e,a){super();let s=this,t=document.createElement("canvas");t.width=n,t.height=e,s.stage=new createjs.Stage(t),s.sprite=a,s.stage.addChild(s.sprite),s.stage.update(),s.mapTexture=new THREE.Texture(t),s.mapTexture.needsUpdate=!0;let l=new THREE.MeshBasicMaterial({map:s.mapTexture,side:2,transparent:!0});s.plane=new THREE.Mesh(new THREE.PlaneGeometry(o,i,1,1),l),s.add(s.plane)}update(){this.stage.update(),this.mapTexture.needsUpdate=!0}};var skyBox=new THREE.Object3D;skyBox.wallU=new TEACHER.ObjPicPlane(1e4,1e4,pics.wallU,"y",1),skyBox.wallD=new TEACHER.ObjPicPlane(1e4,1e4,pics.wallD,"y",0),skyBox.wallS=new TEACHER.ObjPicCylinder(5e3,1e4,pics.wallSide,!0,"y",1),skyBox.wallU.position.y=5e3,skyBox.wallD.position.y=-5e3,skyBox.add(skyBox.wallU).add(skyBox.wallD).add(skyBox.wallS),world3D.scene.add(skyBox);var ground=new TEACHER.ObjPicPlane(100,100,pics.ground,"y");world3D.scene.add(ground);var logo=new TEACHER.ObjPicPlane(100,100/8,pics.logo,"z",2);logo.position.z=-50,logo.position.y=100/8/2,world3D.scene.add(logo);function getMouse3D(o){let t,i=o||"y",n=new THREE.Vector3;"x"===i?t=new THREE.Vector3(1,0,0):"y"===i?t=new THREE.Vector3(0,1,0):"z"===i?t=new THREE.Vector3(0,0,1):log("\u932F\u8AA4!!");let e=new THREE.Vector2;return e.x=2*(world2D.stage.mouseX/1600)-1,e.y=2*-(world2D.stage.mouseY/900)+1,world3D.raycaster.setFromCamera(e,world3D.camera),world3D.raycaster.ray.intersectPlane(new THREE.Plane(t),n),n}TEACHER.CCC=class{constructor(o){this.name=o}},init();