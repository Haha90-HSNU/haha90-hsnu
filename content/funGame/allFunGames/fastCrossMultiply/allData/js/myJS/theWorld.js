var MyJS=MyJS||{};!function(){var l;function o(){1===l.gameMD||(2===l.gameMD?(l.needNewQ&&(!function(){log("出新題目!!!t.levelAC="+l.levelAC+", t.levelBD="+l.levelBD);var e,n,a=Math.random(),t=100;for(;0<t;)e=a<.6?1:a<.7?2:a<.8?3:4,t=l.qType===e&&Math.random()<.5?t-1:-1;l.qType=e;var t=100;for(;0<t;)log(t),1===l.qType?((a=19*Math.random())<5?n=1:a<8?n=2:a<11?n=3:a<13?n=4:a<14?n=5:a<15?n=6:a<16?n=7:a<17?n=8:a<18?n=9:a<19&&(n=10),t=n>l.levelAC||n===l.ansA*l.ansC&&19*Math.random()<a?t-1:-1,1===n||2===n||3===n||5===n||7===n?(l.ansA=1,l.ansC=n):4===n?Math.random()<.5?(l.ansA=1,l.ansC=n):(l.ansA=2,l.ansC=2):6===n?Math.random()<.5?(l.ansA=1,l.ansC=n):(l.ansA=2,l.ansC=3):8===n?Math.random()<.5?(l.ansA=1,l.ansC=n):(l.ansA=2,l.ansC=4):9===n?Math.random()<.5?(l.ansA=1,l.ansC=n):(l.ansA=3,l.ansC=3):10===n?Math.random()<.5?(l.ansA=1,l.ansC=n):(l.ansA=2,l.ansC=5):log("錯誤!!!")):(a=19*Math.random(),t=(n=a<9?1:a<14?4:9)>l.levelAC||n===l.ansA*l.ansC&&19*Math.random()<a?t-1:-1,1===n?(l.ansA=1,l.ansC=1):4===n?(l.ansA=2,l.ansC=2):9===n?(l.ansA=3,l.ansC=3):log("錯誤!!!"));var t=100;for(;0<t;)if(t--,log("bd.need="+t+"t.qT="+l.qType),1===l.qType)1===l.levelBD||2===l.levelBD?(l.ansB=1+Math.floor(9*Math.pow(Math.random(),1.5)),l.ansD=1+Math.floor(9*Math.pow(Math.random(),1.5))):(l.ansB=1+Math.floor(9*Math.pow(Math.random(),1.5)),l.ansD=10+Math.floor(10*Math.pow(Math.random(),1.5))),1===l.levelBD||3===l.levelBD?s(l.ansB*l.ansD)<=4&&(t=-1):4<s(l.ansB*l.ansD)?t=-1:.65<Math.random()&&(t=-1);else{var a=7*Math.random();a<5||1===l.levelBD||2===l.levelBD?l.ansB=1+Math.floor(9*Math.pow(Math.random(),1.5)):l.ansB=10+Math.floor(10*Math.pow(Math.random(),1.5)),l.ansD=l.ansB,t=-1}1===l.qType?(a=3*Math.random())<1?l.ansPN1=l.ansPN2="p":a<2?l.ansPN1=l.ansPN2="n":(l.ansPN1=Math.random()<.5?"p":"n",l.ansPN2="p"===l.ansPN1?"n":"p"):2===l.qType?l.ansPN1=l.ansPN2="p":3===l.qType?l.ansPN1=l.ansPN2="n":4===l.qType&&(l.ansPN1="p",l.ansPN2="n")}(),function(){var e=l.myAnimate.theGame;e.formulaUpA.visible=e.formulaDownA.visible=1<l.ansA*l.ansC,e.formulaUpB.visible=e.formulaDownB.visible=l.ansA*l.ansC==1;var n=l.ansB*("p"===l.ansPN1?1:-1),a=l.ansD*("p"===l.ansPN2?1:-1);1<l.ansA*l.ansC?(m(e.formulaUpA.nPairA,l.ansA*l.ansC),m(e.formulaUpA.nPairB,l.ansA*a+n*l.ansC),m(e.formulaUpA.nPairC,n*a),e.formulaUpA.fPN1.gotoAndStop(0<l.ansA*a+n*l.ansC?0:1),e.formulaUpA.fPN2.gotoAndStop(0<n*a?0:1)):(m(e.formulaUpB.nPairB,l.ansA*a+n*l.ansC),m(e.formulaUpB.nPairC,n*a),e.formulaUpB.fPN1.gotoAndStop(0<l.ansA*a+n*l.ansC?0:1),e.formulaUpB.fPN2.gotoAndStop(0<n*a?0:1))}(),h(),l.needNewQ=!1,l.isDirty=!0),l.nowDate=new Date,l.timerNow+=l.nowDate.getTime()-l.oldDate.getTime(),l.oldDate=new Date,e()):3===l.gameMD?l.hasOOed+l.hasXXed>=l.maxQN?(l.isDirty=!0,l.gameMD=4,e(),l.myAnimate.theGameover.visible=!0,l.myAnimate.theGameover.textQCount.text=l.myAnimate.theGame.theInfoPanel.textQCount.text,l.myAnimate.theGameover.textCorrectRatio.text=l.myAnimate.theGame.theInfoPanel.textCorrectRatio.text,l.myAnimate.theGameover.textAverageTime.text=l.myAnimate.theGame.theInfoPanel.textAverageTime.text):l.gameMD=2:l.gameMD),(l.isDirty||0<l.pointerTweening||0<l.ooxxTweeing)&&(log("update"),l.stage.update(),l.isDirty=!1,l.pointerTweening--,l.ooxxTweeing--)}function r(){l.myAnimate.theWelcome.visible=!0,l.myAnimate.theGameover.visible=!1,l.myAnimate.theGame.visible=!1,l.isDirty=!0}function i(){l.isDirty=!0,l.gameMD=2,l.myAnimate.theWelcome.visible=!1,l.myAnimate.theGameover.visible=!1,l.myAnimate.theGame.visible=!0,l.myAnimate.theGame.ooxx.visible=!1,l.hasOOed=0,l.hasXXed=0,l.timerNow=0,l.timerArray=[],h(),A(),e()}function e(){var e=l.myAnimate.theGame.theInfoPanel;if(e.textLevel.text="ac : "+l.levelAC+" \n",e.textLevel.text+="bd : "+(1===l.levelBD||2===l.levelBD?100:400)+" \n",e.textLevel.text+=1===l.levelBD||3===l.levelBD?"easy":"hard",e.textQCount.text=l.hasOOed+l.hasXXed+"/"+l.maxQN,0<l.hasOOed+l.hasXXed){var n=100*l.hasOOed/(l.hasOOed+l.hasXXed);e.textCorrectRatio.text=(10<n?String(Math.round(n)):function(e,n){var a=n||1,t=String(Math.round(e*Math.pow(10,a)));for(;t.length<=a;)t="0"+t;return ll=t.length,t.slice(0,ll-a)+"."+t.slice(ll-a,ll)}(n,1))+"%"}else e.textCorrectRatio.text="--";var a=String(Math.round(l.timerNow/1e3))+"s";a!==e.textTimePassed.text&&(l.isDirty=!0,e.textTimePassed.text=a);for(var t=0,s=l.timerArray.length,o=0;o<s;o++)t+=l.timerArray[o];t=t/s/1e3,e.textAverageTime.text=0<s?String(Math.round(t))+"s":"--"}function s(e){for(var n=0,a=0;a<=e;a++)e%a==0&&n++;return n}function m(e,n){var a=Math.abs(n);if(999<a)log("錯誤!!超過三位!!");else if(99<a&&a<=999){e.n3?(e.n1.x=-15,e.n2.x=15,e.n3.x=45,e.n1.scaleX=e.n2.scaleX=e.n3.scaleX=.7,e.n3.visible=e.n2.visible=!0):log("錯誤!!n3");var t=Math.floor(a/100),s=Math.floor(a/10)-10*t,o=Math.floor(a)-100*t-10*s;e.n1.gotoAndStop(t),e.n2.gotoAndStop(s),e.n3.gotoAndStop(o)}else if(9<a){e.n3&&(e.n3.visible=!1),e.n1.x=-15,e.n2.x=15,e.n1.scaleX=e.n2.scaleX=.7,e.n2.visible=!0;t=Math.floor(a/10),s=Math.floor(a)-10*t;e.n1.gotoAndStop(t),e.n2.gotoAndStop(s)}else{e.n3&&(e.n3.visible=!1),e.n1.x=0,e.n1.scaleX=1,e.n2.visible=!1;t=Math.floor(a);e.n1.gotoAndStop(t)}}function A(){l.timerNow=0,l.oldDate=new Date,l.nowDate=new Date,l.isDirty=!0}function h(){l.isDirty=!0,c((e=l.myAnimate.theGame).formulaDownA.nPairA),c(e.formulaDownA.nPairB),c(e.formulaDownA.nPairC),c(e.formulaDownA.nPairD),c(e.formulaDownB.nPairB),c(e.formulaDownB.nPairD),e.formulaDownA.fPN1.gotoAndStop(2),e.formulaDownA.fPN2.gotoAndStop(2),e.formulaDownB.fPN1.gotoAndStop(2),e.formulaDownB.fPN2.gotoAndStop(2),l.userA=-1,l.userB=-1,l.userC=-1,l.userD=-1,l.userPN1="",l.userPN2="",l.ansA*l.ansC==1&&(l.userA=1,l.userC=1),l.userHand=void 0,l.anseringWho="",l.anseredDigit=0;for(var e=l.myAnimate.theGame,n=0;n<20;n++){e.allAnserBtns["btn"+g(n+1)].checker.gotoAndStop(0)}e.allAnserBtns.btnPNP.checker.gotoAndStop(0),e.allAnserBtns.btnPNN.checker.gotoAndStop(0),e.btnOK.visible=!1}function c(e){e.n2.visible=!1,e.n1.visible=!0,e.n1.x=0,e.n1.scaleX=1,e.n1.gotoAndStop(10)}function g(e){var n=String(Math.round(e));return 1===n.length&&(n="0"+n),n}function u(e){l.isDirty=!0;var n=e.target.parent.name;l.levelAC=parseInt(n.slice(4,6));for(var a=0;a<10;a++)l.myAnimate.theWelcome["rbAC"+g(a+1)].ched=a+1===l.levelAC,l.myAnimate.theWelcome["rbAC"+g(a+1)].checker.visible=a+1===l.levelAC}function v(e){l.isDirty=!0;var n=e.target.parent.name;l.levelBD=parseInt(n.slice(4,6));for(var a=0;a<4;a++)l.myAnimate.theWelcome["rbBD"+g(a+1)].ched=a+1===l.levelBD,l.myAnimate.theWelcome["rbBD"+g(a+1)].checker.visible=a+1===l.levelBD}function f(e){l.isDirty=!0;var n=e.target.parent.parent.name,a=parseInt(n.slice(-1));1===a?l.maxQN=5:2===a?l.maxQN=10:3===a?l.maxQN=20:4===a?l.maxQN=30:5===a&&(l.maxQN=50);for(var t=0;t<5;t++)l.myAnimate.theWelcome["btnQN"+(t+1)].btnBG.gotoAndStop(t+1===a?1:0)}function D(e){var n=0,a=0;if("mousedown"===e.type?(n=e.stageX,a=e.stageY):"touchstart"===e.type&&(n=e.stageX,a=e.stageY),20!==l.gameMD){var t=l.myAnimate.mPointer;t.visible=!0,t.x=n,t.y=a,t.alpha=1,t.scaleX=t.scaleY=1,createjs.Tween.get(t).to({scaleX:2,scaleY:2,alpha:0},300).call(d),l.pointerTweening=1e12}if(2===l.gameMD){l.isDirty=!0;var s=e.target.parent.name,o=l.myAnimate.theGame;if("nPair"===s.slice(0,5))s===l.anseringWho||(l.anseredDigit=0,l.anseringWho=s,o.allAnserBtns2Num.visible=!0,o.allAnserBtns2PN.visible=!1,1<l.ansA*l.ansC?"nPairA"===s?o.allAnserBtns2Num.x=39:"nPairB"===s?o.allAnserBtns2Num.x=314:"nPairC"===s?o.allAnserBtns2Num.x=563:"nPairD"===s&&(o.allAnserBtns2Num.x=838):"nPairB"===s?o.allAnserBtns2Num.x=300:"nPairD"===s&&(o.allAnserBtns2Num.x=771));else if("fPN"===s.slice(0,3))s===l.anseringWho||(l.anseringWho=s,o.allAnserBtns2PN.visible=!0,o.allAnserBtns2Num.visible=!1,1<l.ansA*l.ansC?"fPN1"===s?o.allAnserBtns2PN.x=454:"fPN2"===s&&(o.allAnserBtns2PN.x=977):"fPN1"===s?o.allAnserBtns2PN.x=424:"fPN2"===s&&(o.allAnserBtns2PN.x=896));else if("btnAnsPN"===s.slice(0,8))"fPN"===l.anseringWho.slice(0,3)?(log("userPN"+l.anseringWho.slice(-1)),l["userPN"+l.anseringWho.slice(-1)]="P"===s.slice(-1)?"p":"n",1<l.ansA*l.ansC?l.myAnimate.theGame.formulaDownA["fPN"+l.anseringWho.slice(-1)].gotoAndStop("P"===s.slice(-1)?0:1):l.myAnimate.theGame.formulaDownB["fPN"+l.anseringWho.slice(-1)].gotoAndStop("P"===s.slice(-1)?0:1)):log("錯誤!!!!");else if("btnAns"===s.slice(0,6)){var r=parseInt(s.slice(-1));log(r),0===l.anseredDigit?0<(l["user"+l.anseringWho.slice(-1)]=r)&&l.anseredDigit++:1===l.anseredDigit&&(l["user"+l.anseringWho.slice(-1)]=10*l["user"+l.anseringWho.slice(-1)]+r,l.anseredDigit++),1<l.ansA*l.ansC?m(l.myAnimate.theGame.formulaDownA[l.anseringWho],l["user"+l.anseringWho.slice(-1)]):m(l.myAnimate.theGame.formulaDownB[l.anseringWho],l["user"+l.anseringWho.slice(-1)])}else"btnClear"===s?("nPair"===l.anseringWho.slice(0,5)?(l.anseredDigit=0,l["user"+l.anseringWho.slice(-1)]=-1):log("錯誤!!!!"),1<l.ansA*l.ansC?c(l.myAnimate.theGame.formulaDownA[l.anseringWho]):c(l.myAnimate.theGame.formulaDownB[l.anseringWho])):"btnOK"===s?function(){l.isDirty=!0,l.myAnimate.theGame.allAnserBtns2Num.visible=!1;var e=l.myAnimate.theGame.allAnserBtns2PN.visible=!1;if(0<l.userA&&0<l.userC&&0<l.userB&&0<l.userD&&0<l.userPN1.length&&0<l.userPN2.length&&(e=!0),e){var n=!(l.gameMD=2.5),a=l.ansB*("p"===l.ansPN1?1:-1),t=l.ansD*("p"===l.ansPN2?1:-1),s=l.userB*("p"===l.userPN1?1:-1),o=l.userD*("p"===l.userPN2?1:-1);l.ansA*l.ansC==l.userA*l.userC&&a*t==s*o&&l.ansA*t+l.ansC*a==l.userA*o+l.userC*s&&(n=!0);var r=l.myAnimate.theGame.ooxx;r.visible=!0,r.alpha=1,l.ooxxTweeing=1e10,n?(r.gotoAndStop(0),createjs.Tween.get(r).wait(200).to({alpha:0,visible:!1},800).call(function(){l.needNewQ=!0,l.gameMD=3,h(),A(),l.hasOOed++,l.ooxxTweeing=10})):(r.gotoAndStop(1),createjs.Tween.get(r).wait(200).to({alpha:0,visible:!1},800).call(function(){l.needNewQ=!1,l.gameMD=3,h(),A(),l.hasXXed++,l.ooxxTweeing=10})),l.timerArray.push(l.timerNow)}}():(log("點外面"),l.anseringWho="",o.allAnserBtns2PN.visible=!1,o.allAnserBtns2Num.visible=!1);log("A="+l.userA),log("B="+l.userB),log("C="+l.userC),log("D="+l.userD),log("pn1="+l.userPN1),log("pn2="+l.userPN2);var i=!1;0<l.userA&&0<l.userC&&0<l.userB&&0<l.userD&&0<l.userPN1.length&&0<l.userPN2.length&&(i=!0),l.myAnimate.theGame.btnOK.visible=i}}function d(){l.pointerTweening=10,l.myAnimate.mPointer.visible=!1}function P(e){MyJS.myFullScreen()}MyJS.TheWorld=function(){l=this,theWorld=l;var e=AdobeAn.getComposition("81610D6FAF4FB2409348D85E8F05CCB2").getLibrary();l.myAnimate=new e.myAnimate;var n=$("<canvas>").attr("width","1280px").attr("height","720px");$("#mainAnimation").append(n),l.stage=new createjs.Stage(n[0]),l.stage.addChild(l.myAnimate),l.stage.enableMouseOver(60),createjs.Touch.enable(l.stage),l.stage.update(),l.isFullScreened=!1,(s=l.myAnimate.btnFullScreen).on("click",P),l.gameMD=1,l.levelAC=1,l.levelBD=1,l.qType,l.ansA,l.ansB,l.ansC,l.ansD,l.ansPN1,l.ansPN2,l.needNewQ=!0,l.isDirty=!0,l.userA,l.userB,l.userC,l.userD,l.userPN1,l.userPN2,l.userHand=void 0,l.anseredDigit=0,l.anseringWho="",l.maxQN=20,l.timerArray=[],l.timerNow=0,l.isTimerCounting=!1,l.oldDate=new Date,l.myAnimate.theWelcome.btnStartGame.on("click",i);for(var a=0;a<10;a++)l.myAnimate.theWelcome["rbAC"+g(a+1)].on("click",u),l.myAnimate.theWelcome["rbAC"+g(a+1)].label.text=String(a+1),l.myAnimate.theWelcome["rbAC"+g(a+1)].label2.text=String(a+1);for(l.myAnimate.theWelcome.rbAC01.ched=!0,l.myAnimate.theWelcome.rbAC01.checker.visible=!0,a=0;a<4;a++)l.myAnimate.theWelcome["rbBD"+g(a+1)].on("click",v),l.myAnimate.theWelcome["rbBD"+g(a+1)].label.visible=!1,l.myAnimate.theWelcome["rbBD"+g(a+1)].label2.visible=!1,l.myAnimate.theWelcome["rbBD"+g(a+1)].btnS.scaleX=1.8,l.myAnimate.theWelcome["rbBD"+g(a+1)].btnS.x=70;for(l.myAnimate.theWelcome.rbBD01.ched=!0,l.myAnimate.theWelcome.rbBD01.checker.visible=!0,a=0;a<5;a++)l.myAnimate.theWelcome["btnQN"+(a+1)].gotoAndStop(a),l.myAnimate.theWelcome["btnQN"+(a+1)].btnTop.gotoAndStop(0),l.myAnimate.theWelcome["btnQN"+(a+1)].btnBG.gotoAndStop(2===a?1:0),l.myAnimate.theWelcome["btnQN"+(a+1)].on("click",f);var t=l.myAnimate.theGame;for(t.allAnserBtns.visible=!1,a=0;a<10;a++){var s;(s=t.allAnserBtns2Num["btnAns"+g(a)]).checker.gotoAndStop(0),m(s,a)}t.allAnserBtns2PN.btnAnsPNP.gotoAndStop(0),t.allAnserBtns2PN.btnAnsPNN.gotoAndStop(1),t.allAnserBtns2PN.btnAnsPNP.checker.gotoAndStop(0),t.allAnserBtns2PN.btnAnsPNN.checker.gotoAndStop(0),t.allAnserBtns2Num.visible=!1,t.allAnserBtns2PN.visible=!1,t.formulaDownA.nPairA.checker.visible=!1,t.formulaDownA.nPairB.checker.visible=!1,t.formulaDownA.nPairC.checker.visible=!1,t.formulaDownA.nPairD.checker.visible=!1,t.formulaDownB.nPairB.checker.visible=!1,t.formulaDownB.nPairD.checker.visible=!1,t.formulaDownA.fPN1.checker.visible=!1,t.formulaDownA.fPN2.checker.visible=!1,t.formulaDownB.fPN1.checker.visible=!1,t.formulaDownB.fPN2.checker.visible=!1,l.myAnimate.theGameover.btnPlayagain.on("click",r),l.myAnimate.theGameover.btnPlayagain.btnTop.gotoAndStop(0),l.myAnimate.theGameover.btnPlayagain.btnBG.gotoAndStop(0),l.stage.on("mousedown",D),r(),setInterval(o,1e3/30),MyJS.myResize()}}();